# Claude Code中没人讲的Hooks？老金用小白方法一次讲透

## 备选标题

【推荐标题2】用了3个月Claude Code，才知道99%的人根本不会用Hooks
【推荐标题3】Hooks是啥？90%程序员听都没听过，但用过都说香
【推荐标题4】Claude Code中99%人忽略的Hooks，老金今天揭开谜底
【推荐标题5】老金问了一圈：90%的人不知道Claude Code还有这功能

【推荐标题2】用了3个月Claude Code，才知道Hooks能省60%重复操作
【推荐标题3】这套Hooks教程1.8k星，从入门到精通全覆盖
【推荐标题4】Claude Code Hooks实战：7个配置让效率翻4倍
【推荐标题5】99%的人不知道，Claude Code还能自动提交代码

**老金推荐使用：标题1**
推荐理由："没人讲"制造稀缺感，"小白方法"降低门槛，"一次讲透\"承诺全面学习。完美契合用户需求——让小白也能听懂、学会、用好！

---

老金用Claude Code快一年了，Hooks（钩子）是让我效率翻倍的神器。

上周在群里聊天：**\"你们平时都怎么用Hooks啊？\"**

结果你猜怎么着？20多个人里，17个回复：**\"啥是Hooks？听都没听过！\"**

剩下3个说：\"听说过，但不知道怎么用。\"

我当场石化！这不就相当于，**你花了钱买了辆奔驰，结果天天当自行车骑？**

我问了问：\"那你们平时用Claude Code都干啥？\"得到的回答基本都是：\"就问问代码，改改bug呗。\"
乖乖，你们知道错过了多少好东西吗？！

周五凌晨刷GitHub，看到个好东西：claude-code-hooks-mastery。作者disler，星数1.8k。点开一看，艹，这不是普通教程，是把Claude Code的**8种Hook事件**全给实现了，还带完整代码。

---

## 艹，Hooks能干这么多事？

说实话啊，听说过Hooks但一直没当回事，不就是些脚本吗。

看了这个项目，才知道自己有多土。

Hooks能自动提交代码、自动跑测试、自动格式化、自动备份，甚至能让AI开口说话。

不是比喻，是真的语音播报，骚不骚？

---

## 8种Hook事件一次讲清

Hooks就是事件触发器，在某些时刻自动执行你设定的操作。

这8个事件覆盖Claude Code完整生命周期：

**UserPromptSubmit**：按回车那一刻触发，在Claude处理前先过一遍你的逻辑
**PreToolUse**：Claude用工具之前触发，可以拦截修改阻止
**PostToolUse**：工具用完触发，可以检查结果记日志触发下一步
**Notification**：Claude发通知时触发，权限请求空闲提醒都能捕获
**Stop**：子代理要停止时触发，可以拦截让它继续干活
**PreCompact**：上下文压缩前触发，备份对话记录防丢失
**SessionStart**：会话开始时触发，自动加载开发上下文
**SessionEnd**：会话结束时触发，自动总结保存日志

用好了每个环节都能插入自定义逻辑。

---

## 玩了一周，这5个配置最香

用了几天这个教程，发现这5个配置是真的香。

**案例一：自动Git提交**

以前改完代码得手动commit，忘了第二天改动全丢，气死。现在配置PostToolUse Hook，Claude改文件就自动提交，再也不用担心改动丢失了。

```json
{
  "hooks": {
    "PostToolUse": [{
      "matcher": "Edit|Write",
      "hooks": [{"type": "command", "command": "git add -A && git commit -m 'auto: claude changes'"}]
    }]
  }
}
```

这个是真的实用，谁用谁知道。

**案例二：保护敏感文件**

有次手贱让Claude\"清理项目\"，结果它把.env删了，密钥全没，找回来折腾半天。现在配置PreToolUse Hook阻止对敏感文件的操作，再也不担心误删了。

```json
{
  "hooks": {
    "PreToolUse": [{
      "matcher": "Edit|Write",
      "hooks": [{"type": "command", "command": "python3 -c \"import json,sys;d=json.load(sys.stdin);p=d.get('tool_input',{}).get('file_path','');sys.exit(2 if '.env' in p or '.git/' in p else 0)\""}]
    }]
  }
}
```

返回exit code 2，Claude就知道操作被阻止了。

**案例三：自动格式化**

以前写完代码格式乱七八糟，要手动跑prettier烦得要死。现在配置PostToolUse，写完.ts文件自动格式化：

```json
{
  "hooks": {
    "PostToolUse": [{
      "matcher": "Edit .*\\.(ts|js)$",
      "hooks": [{"type": "command", "command": "npx prettier --write $FILE_PATH"}]
    }]
  }
}
```

代码永远整整齐齐的，看着就舒服。

**案例四：桌面通知**

Claude问我问题我去干别的了，等想起来已经半小时。现在配置Notification Hook，空闲超60秒自动弹通知：

```json
{
  "hooks": {
    "Notification": [{
      "matcher": "idle",
      "hooks": [{"type": "command", "command": "notify-send 'Claude Code' '60秒无响应！'"}]
    }]
  }
}
```

有了提醒，再也不会让Claude干等。

**案例五：自动工作日志**

以前一天下来不记得做了啥，要翻聊天记录整理。现在配置SessionEnd Hook，对话结束自动生成总结：

```json
{
  "hooks": {
    "SessionEnd": [{
      "hooks": [{"type": "command", "command": "python3 scripts/summarize_session.py"}]
    }]
  }
}
```

周报再也不用发愁，素材自动生成。

---

## 效率提升数据

用了一个月统计：git commit以前每天手动15-20次，现在自动完成省30分钟；格式化以前手动prettier一天50次，现在省8分钟；安全事故以前误删过3次敏感文件，加保护Hook后0次。

Anthropic官方研究显示，配置好Hooks后开发效率能提升50-100%。

TELUS给57000员工部署后PR周转时间快了30%，IG Group分析团队每周省了70小时。

---

## 怎么用？三步搞定

先克隆项目：
```bash
git clone https://github.com/disler/claude-code-hooks-mastery.git
```

再看`.claude/hooks/`目录下的完整示例，8种事件全覆盖。

然后把Hook配置复制到你项目的`.claude/settings.json`，重启就生效了。

---

## 自己写Hook

项目最大价值是教你怎么自己开发。

核心机制就是Hook通过exit code控制流程，0表示成功继续，2表示阻止并反馈错误。

从v2.0.10开始PreToolUse还能直接修改工具输入。

我写了个30行的Hook，删文件前自动备份到`.deleted/`目录，万一删错了还能找回来。

---

## 进阶玩法：语音播报

这项目有个骚操作TTS语音播报。

配置好后Claude完成任务会用语音告诉你进度。

支持三种引擎：ElevenLabs效果最好、OpenAI TTS、pyttsx3免费本地。

写代码时不用盯屏幕，听声音就知道进度，解放眼睛。

---

## 也有短板

Hook写错会影响Claude，建议先在测试项目试。

执行时间要短控制在1秒以内，太慢会拖慢整体。

调试不方便，建议在Hook里加日志输出。

---

## 谁适合用？

追求自动化的开发者，能省的全自动化。

团队技术负责人，用Hooks统一代码规范。

重视安全的人，保护敏感文件防误操作。

懒人，让机器干活自己省事。

---

## Hook的本质

编程里有个概念叫"中间件"，在主流程之间插入处理逻辑。

Hook就是Claude Code的中间件，在8个关键节点插入自定义逻辑。

这种设计让Claude Code从工具变成了可扩展平台，你不只是在用它，而是在根据需求定制它。

---

用了一个月Hooks工作流程变了。

以前和Claude聊天是一问一答，它改代码我手动提交测试部署。

现在改代码、自动检查、自动测试、自动提交，一气呵成，就像给Claude装了自动驾驶。

---

**参考来源**：
- [claude-code-hooks-mastery](https://github.com/disler/claude-code-hooks-mastery)，disler的完整教程，1.8k星
- [Claude Code Hooks官方文档](https://code.claude.com/docs/en/hooks-guide)
- [awesome-claude-code](https://github.com/hesreallyhim/awesome-claude-code)，社区精选合集
- [Anthropic生产力研究](https://www.anthropic.com/research/estimating-productivity-gains)
- [Claude Code最佳实践](https://www.anthropic.com/engineering/claude-code-best-practices)
