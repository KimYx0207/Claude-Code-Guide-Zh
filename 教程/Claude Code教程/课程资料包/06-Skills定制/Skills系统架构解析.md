# Skillsç³»ç»Ÿæ¶æ„è§£æ

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**é€‚ç”¨ç‰ˆæœ¬**: Claude Code 1.0+
**æ›´æ–°æ—¥æœŸ**: 2025-12-11
**é¢„è®¡é˜…è¯»æ—¶é—´**: 45åˆ†é’Ÿ


## ç¬¬ä¸€ç«  Skillsæ¦‚è¿°
### 1.1 ä»€ä¹ˆæ˜¯Skills
Skillsæ˜¯Claude Codeä¸­ç”¨äºå°è£…é¢†åŸŸçŸ¥è¯†å’Œå¯å¤ç”¨èƒ½åŠ›çš„é«˜çº§æ¨¡å—åŒ–ç³»ç»Ÿã€‚ä¸Commandsæä¾›çš„ç®€å•å‘½ä»¤è§¦å‘ä¸åŒ,Skillsä»£è¡¨äº†ä¸€ä¸ªå®Œæ•´çš„èƒ½åŠ›åŒ…,åŒ…å«æç¤ºè¯å·¥ç¨‹ã€å·¥å…·è„šæœ¬ã€é…ç½®ç®¡ç†å’Œå·¥ä½œæµç¼–æ’ç­‰å¤šä¸ªå±‚é¢ã€‚

**æ ¸å¿ƒå®šä¹‰**:
Skillsæ˜¯ä¸€ç§å°†ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†ã€æœ€ä½³å®è·µã€å·¥ä½œæµç¨‹å’Œè‡ªåŠ¨åŒ–è„šæœ¬å°è£…æˆå¯å¤ç”¨å•å…ƒçš„æœºåˆ¶ã€‚æ¯ä¸ªSkilléƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„èƒ½åŠ›æ¨¡å—,å¯ä»¥è¢«Claude Codeåœ¨åˆé€‚çš„ä¸Šä¸‹æ–‡ä¸­è‡ªåŠ¨æ¿€æ´»æˆ–æ‰‹åŠ¨è°ƒç”¨ã€‚

**è®¾è®¡å“²å­¦**:
Claude Codeçš„Skillsç³»ç»Ÿé‡‡ç”¨äº†"æ¸è¿›å¼æŠ«éœ²"(Progressive Disclosure)çš„è®¾è®¡ç†å¿µã€‚è¿™æ„å‘³ç€:

1ã€**ç®€å•ä»»åŠ¡ä¿æŒç®€å•**: æ—¥å¸¸ä½¿ç”¨ä¸éœ€è¦äº†è§£Skillsçš„å†…éƒ¨ç»†èŠ‚
2ã€**å¤æ‚éœ€æ±‚å¯ä»¥æ‰©å±•**: éœ€è¦æ—¶å¯ä»¥æ·±å…¥å®šåˆ¶æ¯ä¸€ä¸ªç»†èŠ‚
3ã€**çŸ¥è¯†å¯ä»¥ç§¯ç´¯**: æ¯æ¬¡ä½¿ç”¨éƒ½åœ¨å®Œå–„å’Œä¼˜åŒ–Skills

**ç±»æ¯”ç†è§£**:
å¦‚æœæŠŠClaude Codeæ¯”ä½œä¸€ä¸ªå¤šæ‰å¤šè‰ºçš„åŠ©æ‰‹,é‚£ä¹ˆ:
- **CLAUDE.md** æ˜¯åŠ©æ‰‹çš„åŸºæœ¬åŸ¹è®­æ‰‹å†Œ
- **Commands** æ˜¯åŠ©æ‰‹èƒ½æ‰§è¡Œçš„æ ‡å‡†æ“ä½œæŒ‡ä»¤
- **Skills** åˆ™æ˜¯åŠ©æ‰‹æŒæ¡çš„ä¸“ä¸šæŠ€èƒ½è¯ä¹¦,æ¯ä¸ªæŠ€èƒ½éƒ½åŒ…å«å®Œæ•´çš„çŸ¥è¯†ä½“ç³»å’Œæ“ä½œè§„èŒƒ

### 1.2 Skills vs Commands: æ·±åº¦å¯¹æ¯”
ç†è§£Skillså’ŒCommandsçš„åŒºåˆ«æ˜¯æŒæ¡Claude Codeé«˜çº§ç”¨æ³•çš„å…³é”®ã€‚

#### ç»´åº¦å¯¹æ¯”

**ç»´åº¦**ï¼š**å®šä½**
**Commands**ï¼šè§¦å‘å™¨/å…¥å£ç‚¹
**Skills**ï¼šèƒ½åŠ›åŒ…/çŸ¥è¯†åº“


**ç»´åº¦**ï¼š**å¤æ‚åº¦**
**Commands**ï¼šå•ä¸€Markdownæ–‡ä»¶
**Skills**ï¼šå¤šæ–‡ä»¶ç›®å½•ç»“æ„


**ç»´åº¦**ï¼š**è§¦å‘æ–¹å¼**
**Commands**ï¼šæ˜¾å¼è°ƒç”¨ `/command`
**Skills**ï¼šè‡ªåŠ¨è¯†åˆ« + æ˜¾å¼è°ƒç”¨


**ç»´åº¦**ï¼š**çŠ¶æ€ç®¡ç†**
**Commands**ï¼šæ— çŠ¶æ€
**Skills**ï¼šå¯ä»¥ç»´æŠ¤çŠ¶æ€å’Œé…ç½®


**ç»´åº¦**ï¼š**å·¥å…·é›†æˆ**
**Commands**ï¼šæœ‰é™
**Skills**ï¼šå¯é›†æˆPython/JSè„šæœ¬


**ç»´åº¦**ï¼š**çŸ¥è¯†å®¹é‡**
**Commands**ï¼šå‡ ç™¾åˆ°å‡ åƒå­—
**Skills**ï¼šå¯è¾¾æ•°ä¸‡å­—


**ç»´åº¦**ï¼š**å¯ç»´æŠ¤æ€§**
**Commands**ï¼šç®€å•ç›´æ¥
**Skills**ï¼šæ¨¡å—åŒ–åˆ†å±‚


**ç»´åº¦**ï¼š**é€‚ç”¨åœºæ™¯**
**Commands**ï¼šå•ä¸€ä»»åŠ¡
**Skills**ï¼šå¤æ‚å·¥ä½œæµ


#### å…³ç³»æ¨¡å‹
```
                    ç”¨æˆ·è¾“å…¥
                       |
                       v
           +------------------------+
           |      CLAUDE.md         |  <- å…¨å±€ä¸Šä¸‹æ–‡
           +------------------------+
                       |
        +--------------+--------------+
        |                             |
        v                             v
+----------------+           +------------------+
|   Commands     |  <------> |     Skills       |
| (è§¦å‘å±‚)       |   è°ƒç”¨    | (èƒ½åŠ›å±‚)         |
+----------------+           +------------------+
        |                             |
        v                             v
+----------------+           +------------------+
| ç®€å•ä»»åŠ¡æ‰§è¡Œ   |           | prompts/         |
|                |           | scripts/         |
|                |           | config/          |
|                |           | templates/       |
+----------------+           +------------------+
```

**åä½œæ¨¡å¼**:
Commandså’ŒSkillsé€šå¸¸ååŒå·¥ä½œ:
1ã€Commandä½œä¸ºç”¨æˆ·äº¤äº’çš„å…¥å£ç‚¹
2ã€Commandå†…éƒ¨å¼•ç”¨å’Œè°ƒç”¨Skillçš„èƒ½åŠ›
3ã€Skillæä¾›æ·±å±‚çš„çŸ¥è¯†æ”¯æŒå’Œå·¥å…·æ‰§è¡Œ

**ç¤ºä¾‹: `/write` å‘½ä»¤ä¸å…¬ä¼—å·å†™ä½œSkillçš„åä½œ**:
```markdown
# 01-write.md (Commandå±‚)
å½“ç”¨æˆ·è¾“å…¥ /write æ—¶:
1ã€è¯»å– `.claude/skills/gongzhonghao-writer/prompts/baokuan-rules.md`
2ã€è°ƒç”¨ `scripts/title_generator.py` ç”Ÿæˆæ ‡é¢˜
3ã€åº”ç”¨ `prompts/laojin-style-v6-natural.md` é£æ ¼è§„èŒƒ
4ã€æ‰§è¡Œ `scripts/quality_detector.py` è´¨é‡æ£€æµ‹
```

### 1.3 Progressive DisclosureåŸç†
Progressive Disclosure(æ¸è¿›å¼æŠ«éœ²)æ˜¯ä¸€ç§ç”¨æˆ·ä½“éªŒè®¾è®¡åŸåˆ™,å…¶æ ¸å¿ƒæ€æƒ³æ˜¯:åªåœ¨ç”¨æˆ·éœ€è¦æ—¶æ‰å±•ç¤ºå¤æ‚åŠŸèƒ½,é¿å…ä¿¡æ¯è¿‡è½½ã€‚

**åœ¨Skillsç³»ç»Ÿä¸­çš„ä½“ç°**:

#### ç¬¬ä¸€å±‚: è‡ªåŠ¨æ¿€æ´»
```
ç”¨æˆ·: "å¸®æˆ‘å†™ä¸€ç¯‡å…³äºClaude Codeçš„å…¬ä¼—å·æ–‡ç« "
Claude Code: [è¯†åˆ«åˆ°"å…¬ä¼—å·"å…³é”®è¯,è‡ªåŠ¨åŠ è½½gongzhonghao-writer Skill]
```

ç”¨æˆ·æ— éœ€çŸ¥é“Skillçš„å­˜åœ¨,ç³»ç»Ÿé€šè¿‡å…³é”®è¯è‡ªåŠ¨åŒ¹é…å¹¶æ¿€æ´»ç›¸åº”èƒ½åŠ›ã€‚

#### ç¬¬äºŒå±‚: æ˜¾å¼è°ƒç”¨
```
ç”¨æˆ·: /write Claude Codeæ–°åŠŸèƒ½è§£æ
Claude Code: [æ‰§è¡Œå®Œæ•´çš„å†™ä½œå·¥ä½œæµ]
```

ç”¨æˆ·é€šè¿‡Slashå‘½ä»¤æ˜ç¡®è§¦å‘,è·å¾—æ›´å¯æ§çš„æ‰§è¡Œæµç¨‹ã€‚

#### ç¬¬ä¸‰å±‚: æ·±åº¦å®šåˆ¶
```yaml
# skill.yaml
triggers:
  keywords:
    - "å…¬ä¼—å·"
    - "å†™æ–‡ç« "
    - "è€é‡‘é£æ ¼"
```

ç”¨æˆ·å¯ä»¥ä¿®æ”¹é…ç½®,è°ƒæ•´è§¦å‘æ¡ä»¶å’Œè¡Œä¸ºå‚æ•°ã€‚

#### ç¬¬å››å±‚: å®Œå…¨æ§åˆ¶
```
ç”¨æˆ·å¯ä»¥:
- ä¿®æ”¹prompts/*.mdè°ƒæ•´ç”Ÿæˆé£æ ¼
- ç¼–è¾‘scripts/*.pyæ”¹å˜å¤„ç†é€»è¾‘
- åˆ›å»ºæ–°çš„templates/å®šåˆ¶è¾“å‡ºæ ¼å¼
```

**è®¾è®¡ä¼˜åŠ¿**:
1ã€**é™ä½å…¥é—¨é—¨æ§›**: æ–°æ‰‹å¯ä»¥ç›´æ¥ä½¿ç”¨,æ— éœ€å­¦ä¹ å¤æ‚é…ç½®
2ã€**ä¿æŒçµæ´»æ€§**: é«˜çº§ç”¨æˆ·å¯ä»¥æ·±åº¦å®šåˆ¶æ¯ä¸ªç»†èŠ‚
3ã€**çŸ¥è¯†ç§¯ç´¯**: å›¢é˜Ÿå¯ä»¥å°†æœ€ä½³å®è·µæ²‰æ·€åˆ°Skillsä¸­
4ã€**å¯ç§»æ¤æ€§**: Skillså¯ä»¥åœ¨é¡¹ç›®é—´å…±äº«å’Œå¤ç”¨

### 1.4 é€‚ç”¨åœºæ™¯åˆ†æ
**é€‚åˆä½¿ç”¨Skillsçš„åœºæ™¯**:

1ã€**é¢†åŸŸä¸“ä¸šåŒ–ä»»åŠ¡**
   - ç‰¹å®šè¡Œä¸šçš„å†™ä½œè§„èŒƒ(å¦‚å…¬ä¼—å·ã€æŠ€æœ¯åšå®¢ã€å­¦æœ¯è®ºæ–‡)
   - ä¸“ä¸šé¢†åŸŸçš„ä»£ç å®¡æŸ¥æ ‡å‡†
   - ç‰¹å®šæ¡†æ¶çš„æœ€ä½³å®è·µ

2ã€**éœ€è¦çŸ¥è¯†ç§¯ç´¯çš„å·¥ä½œ**
   - æ•°æ®é©±åŠ¨çš„è§„åˆ™ä¼˜åŒ–
   - å†å²ç»éªŒçš„æ²‰æ·€
   - å›¢é˜Ÿè§„èŒƒçš„ç»Ÿä¸€

3ã€**å¤æ‚å¤šæ­¥éª¤å·¥ä½œæµ**
   - éœ€è¦è°ƒç”¨å¤šä¸ªå·¥å…·çš„ä»»åŠ¡
   - æœ‰è´¨é‡æ£€æµ‹è¦æ±‚çš„è¾“å‡º
   - éœ€è¦çŠ¶æ€ç®¡ç†çš„æµç¨‹

4ã€**å¯å¤ç”¨èƒ½åŠ›çš„å°è£…**
   - è·¨é¡¹ç›®å…±äº«çš„èƒ½åŠ›
   - å›¢é˜Ÿæ ‡å‡†åŒ–æ“ä½œ
   - ä¸ªäººç”Ÿäº§åŠ›å·¥å…·åŒ…

**ä¸é€‚åˆä½¿ç”¨Skillsçš„åœºæ™¯**:

1ã€**ä¸€æ¬¡æ€§ç®€å•ä»»åŠ¡**: ç›´æ¥åœ¨å¯¹è¯ä¸­æè¿°å³å¯
2ã€**é«˜åº¦å˜åŒ–çš„éœ€æ±‚**: æ¯æ¬¡éƒ½ä¸åŒçš„ä¸´æ—¶ä»»åŠ¡
3ã€**æ— æ³•æ ‡å‡†åŒ–çš„å·¥ä½œ**: å®Œå…¨ä¾èµ–åˆ›æ„å’Œçµæ„Ÿçš„ä»»åŠ¡


## ç¬¬äºŒç«  ç›®å½•ç»“æ„è¯¦è§£
### 2.1 æ ‡å‡†ç›®å½•ç»“æ„
Skillsé‡‡ç”¨çº¦å®šä¼˜äºé…ç½®çš„ç›®å½•ç»“æ„,æ¯ä¸ªSkilléƒ½æ˜¯`.claude/skills/`ä¸‹çš„ä¸€ä¸ªç‹¬ç«‹ç›®å½•:
```
.claude/skills/[skill-name]/
â”œâ”€â”€ skill.yaml              # [å¿…éœ€] Skillé…ç½®æ–‡ä»¶
â”œâ”€â”€ prompts/                # [æ¨è] æç¤ºè¯æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ main-prompt.md      # ä¸»è¦æç¤ºè¯
â”‚   â”œâ”€â”€ style-guide.md      # é£æ ¼æŒ‡å—
â”‚   â””â”€â”€ rules.md            # è§„åˆ™å®šä¹‰
â”œâ”€â”€ scripts/                # [å¯é€‰] å·¥å…·è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ processor.py        # Pythonå¤„ç†è„šæœ¬
â”‚   â”œâ”€â”€ validator.js        # JavaScriptéªŒè¯è„šæœ¬
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ templates/              # [å¯é€‰] æ¨¡æ¿æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ output-template.md  # è¾“å‡ºæ¨¡æ¿
â”‚   â””â”€â”€ report-template.md  # æŠ¥å‘Šæ¨¡æ¿
â”œâ”€â”€ config/                 # [å¯é€‰] é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ settings.json       # è¿è¡Œæ—¶é…ç½®
â”œâ”€â”€ docs/                   # [å¯é€‰] å†…éƒ¨æ–‡æ¡£
â”‚   â””â”€â”€ design.md           # è®¾è®¡æ–‡æ¡£
â””â”€â”€ data/                   # [å¯é€‰] æ•°æ®æ–‡ä»¶
    â””â”€â”€ knowledge-base.json # çŸ¥è¯†åº“æ•°æ®
```

#### å®Œæ•´ç›®å½•æ ‘å¯è§†åŒ–
ä»¥ä¸‹æ˜¯çœŸå®é¡¹ç›®"å…¬ä¼—å·å†™ä½œåŠ©æ‰‹"çš„å®Œæ•´ç›®å½•ç»“æ„,å¸¦æ–‡ä»¶å¤§å°å’Œä¿®æ”¹æ—¶é—´:
```bash
.claude/skills/gongzhonghao-writer/
â”œâ”€â”€ skill.yaml                             (4.2 KB, 2025-12-10)
â”œâ”€â”€ prompts/
â”‚   â”œâ”€â”€ laojin-style-v6-natural.md         (28.5 KB, 2025-12-06)
â”‚   â”œâ”€â”€ baokuan-rules.md                   (45.3 KB, 2025-12-10)
â”‚   â”œâ”€â”€ é€‰é¢˜ç­–ç•¥æŒ‡å—.md                     (12.8 KB, 2025-12-10)
â”‚   â”œâ”€â”€ format-rules.md                    (8.4 KB, 2025-11-28)
â”‚   â”œâ”€â”€ auto-image-generator.md            (6.7 KB, 2025-11-20)
â”‚   â”œâ”€â”€ infographic-generator.md           (9.2 KB, 2025-11-22)
â”‚   â”œâ”€â”€ writing-checklist.md               (4.1 KB, 2025-11-15)
â”‚   â”œâ”€â”€ hotspot-sources-china.md           (5.6 KB, 2025-11-18)
â”‚   â”œâ”€â”€ hotspot-sources-international.md   (4.9 KB, 2025-11-18)
â”‚   â”œâ”€â”€ hotspot-access-methods.md          (3.2 KB, 2025-11-18)
â”‚   â””â”€â”€ hotspot-credibility-config.md      (2.8 KB, 2025-11-18)
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ quality_detector.py                (15.4 KB, 2025-12-08)
â”‚   â”œâ”€â”€ title_generator.py                 (18.7 KB, 2025-12-10)
â”‚   â”œâ”€â”€ title_scorer.py                    (12.3 KB, 2025-12-09)
â”‚   â”œâ”€â”€ pre_publish_checker.py             (10.8 KB, 2025-12-05)
â”‚   â”œâ”€â”€ topic_filter.py                    (9.6 KB, 2025-12-10)
â”‚   â””â”€â”€ infographic_generator.py           (14.2 KB, 2025-11-22)
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ rule_validation_report.json        (42.1 KB, 2025-12-10)
â”‚   â””â”€â”€ historical_articles.json           (128.5 KB, 2025-12-10)
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ article-template.md                (3.5 KB, 2025-11-10)
â”‚   â””â”€â”€ report-template.md                 (2.8 KB, 2025-11-10)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ DATA_DRIVEN_WORKFLOW.md            (7.2 KB, 2025-12-10)
â”‚   â””â”€â”€ architecture.md                    (5.8 KB, 2025-11-15)
â””â”€â”€ README.md                               (6.4 KB, 2025-12-10)
```

ğŸ“¸ **æˆªå›¾ä½ç½®**: [æ˜¾ç¤ºVS Codeä¸­Skillsç›®å½•çš„å®Œæ•´æ ‘å½¢ç»“æ„,åŒ…å«æ–‡ä»¶å›¾æ ‡ã€å¤§å°å’Œä¿®æ”¹æ—¶é—´]

#### è‡ªåŠ¨åŒ–ç›®å½•åˆ›å»ºè„šæœ¬
åˆ›å»ºä¸€ä¸ªæ ‡å‡†Skillç›®å½•ç»“æ„çš„å®Œæ•´Shellè„šæœ¬:
```bash
#!/bin/bash
# create-skill-structure.sh - Skillç›®å½•ç»“æ„è‡ªåŠ¨åŒ–åˆ›å»ºå·¥å…·
# ç”¨æ³•: ./create-skill-structure.sh <skill-name>

set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º

SKILL_NAME=$1

if [ -z "$SKILL_NAME" ]; then
    echo "é”™è¯¯: è¯·æä¾›Skillåç§°"
    echo "ç”¨æ³•: $0 <skill-name>"
    exit 1
fi

SKILL_DIR=".claude/skills/${SKILL_NAME}"

echo "ğŸš€ å¼€å§‹åˆ›å»ºSkillç›®å½•: ${SKILL_NAME}"

# åˆ›å»ºä¸»ç›®å½•
mkdir -p "${SKILL_DIR}"
mkdir -p "${SKILL_DIR}/prompts"
mkdir -p "${SKILL_DIR}/scripts"
mkdir -p "${SKILL_DIR}/templates"
mkdir -p "${SKILL_DIR}/config"
mkdir -p "${SKILL_DIR}/docs"
mkdir -p "${SKILL_DIR}/data"

# è®¾ç½®ç›®å½•æƒé™
chmod 755 "${SKILL_DIR}"
chmod 755 "${SKILL_DIR}/prompts"
chmod 755 "${SKILL_DIR}/scripts"

# åˆ›å»ºskill.yamlæ¨¡æ¿
cat > "${SKILL_DIR}/skill.yaml" << 'EOF'
name: "Skillåç§°"
description: "Skillç®€çŸ­æè¿°"
version: "1.0.0"
author: "ä½ çš„åå­—"

triggers:
  keywords:
    - "è§¦å‘å…³é”®è¯1"
    - "è§¦å‘å…³é”®è¯2"

prompt_files:
  main: "prompts/main-prompt.md"

capabilities:
  - name: "æ ¸å¿ƒèƒ½åŠ›1"
    description: "èƒ½åŠ›æè¿°"
EOF

# åˆ›å»ºä¸»æç¤ºè¯æ¨¡æ¿
cat > "${SKILL_DIR}/prompts/main-prompt.md" << 'EOF'
# Skillä¸»æç¤ºè¯

## ä¸€ã€è§’è‰²å®šä¹‰
[å®šä¹‰AIæ‰®æ¼”çš„è§’è‰²]

## äºŒã€ä»»åŠ¡è¯´æ˜
[æè¿°è¦å®Œæˆçš„ä»»åŠ¡]

## ä¸‰ã€è§„åˆ™çº¦æŸ
[å®šä¹‰å¿…é¡»éµå®ˆçš„è§„åˆ™]

## å››ã€ç¤ºä¾‹å±•ç¤º
[æä¾›å…·ä½“ç¤ºä¾‹]

## äº”ã€è¾“å‡ºæ ¼å¼
[å®šä¹‰è¾“å‡ºç»“æ„]
EOF

# åˆ›å»ºç¤ºä¾‹è„šæœ¬
cat > "${SKILL_DIR}/scripts/example_processor.py" << 'EOF'
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
ç¤ºä¾‹å¤„ç†å™¨è„šæœ¬ V1.0.0
"""

import sys
from typing import Optional

def process(input_text: str) -> str:
    """å¤„ç†è¾“å…¥æ–‡æœ¬"""
    return f"å¤„ç†ç»“æœ: {input_text}"

def main():
    if len(sys.argv) < 2:
        print("ç”¨æ³•: python example_processor.py <è¾“å…¥>")
        sys.exit(1)

    result = process(sys.argv[1])
    print(result)

if __name__ == "__main__":
    main()
EOF

chmod +x "${SKILL_DIR}/scripts/example_processor.py"

# åˆ›å»ºREADME
cat > "${SKILL_DIR}/README.md" << EOF
# ${SKILL_NAME}

**ç‰ˆæœ¬**: 1.0.0
**åˆ›å»ºæ—¶é—´**: $(date +%Y-%m-%d)

## ç›®å½•è¯´æ˜
- \`skill.yaml\`: Skillé…ç½®æ–‡ä»¶
- \`prompts/\`: æç¤ºè¯æ–‡ä»¶ç›®å½•
- \`scripts/\`: å·¥å…·è„šæœ¬ç›®å½•
- \`templates/\`: æ¨¡æ¿æ–‡ä»¶ç›®å½•
- \`config/\`: é…ç½®æ–‡ä»¶ç›®å½•
- \`docs/\`: å†…éƒ¨æ–‡æ¡£ç›®å½•
- \`data/\`: æ•°æ®æ–‡ä»¶ç›®å½•

## å¼€å§‹ä½¿ç”¨
1ã€ç¼–è¾‘ \`skill.yaml\` é…ç½®åŸºæœ¬ä¿¡æ¯
2ã€åœ¨ \`prompts/main-prompt.md\` ä¸­ç¼–å†™æç¤ºè¯
3ã€æ ¹æ®éœ€è¦æ·»åŠ è„šæœ¬åˆ° \`scripts/\` ç›®å½•
EOF

# åˆå§‹åŒ–Git (å¦‚æœé¡¹ç›®æ ¹ç›®å½•æœ‰.git)
if [ -d ".git" ]; then
    git add "${SKILL_DIR}"
    echo "âœ… å·²æ·»åŠ åˆ°Gitæš‚å­˜åŒº"
fi

echo "âœ… Skillç›®å½•åˆ›å»ºå®Œæˆ: ${SKILL_DIR}"
echo ""
echo "ä¸‹ä¸€æ­¥:"
echo "1. ç¼–è¾‘ ${SKILL_DIR}/skill.yaml"
echo "2. ç¼–å†™ ${SKILL_DIR}/prompts/main-prompt.md"
echo "3. è¿è¡Œ 'git commit -m \"feat: add ${SKILL_NAME} skill\"'"
```

#### 3ç§å¤æ‚åº¦çº§åˆ«çš„ç›®å½•å¯¹æ¯”

**æ–‡ä»¶/ç›®å½•**ï¼š**skill.yaml**
**ç®€å•Skill**ï¼šâœ… (50è¡Œ)
**ä¸­ç­‰Skill**ï¼šâœ… (150è¡Œ)
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼šâœ… (300è¡Œ)


**æ–‡ä»¶/ç›®å½•**ï¼š**prompts/**
**ç®€å•Skill**ï¼š1-2ä¸ªæ–‡ä»¶
**ä¸­ç­‰Skill**ï¼š3-5ä¸ªæ–‡ä»¶
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼š12ä¸ªæ–‡ä»¶(132KB)


**æ–‡ä»¶/ç›®å½•**ï¼š**scripts/**
**ç®€å•Skill**ï¼š0-1ä¸ªè„šæœ¬
**ä¸­ç­‰Skill**ï¼š2-3ä¸ªè„šæœ¬
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼š6ä¸ªè„šæœ¬(81KB)


**æ–‡ä»¶/ç›®å½•**ï¼š**templates/**
**ç®€å•Skill**ï¼šâŒ
**ä¸­ç­‰Skill**ï¼šâœ… (1-2ä¸ª)
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼šâœ… (2ä¸ª)


**æ–‡ä»¶/ç›®å½•**ï¼š**data/**
**ç®€å•Skill**ï¼šâŒ
**ä¸­ç­‰Skill**ï¼šâŒ
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼šâœ… (170KB JSON)


**æ–‡ä»¶/ç›®å½•**ï¼š**config/**
**ç®€å•Skill**ï¼šâŒ
**ä¸­ç­‰Skill**ï¼šâœ… (settings.json)
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼šâœ… (å¤šé…ç½®æ–‡ä»¶)


**æ–‡ä»¶/ç›®å½•**ï¼š**docs/**
**ç®€å•Skill**ï¼šREADME.md
**ä¸­ç­‰Skill**ï¼šâœ… (2-3ä¸ª)
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼šâœ… (è®¾è®¡+å·¥ä½œæµæ–‡æ¡£)


**æ–‡ä»¶/ç›®å½•**ï¼š**æ€»æ–‡ä»¶æ•°**
**ç®€å•Skill**ï¼š3-5ä¸ª
**ä¸­ç­‰Skill**ï¼š8-12ä¸ª
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼š30+ä¸ª


**æ–‡ä»¶/ç›®å½•**ï¼š**æ€»å¤§å°**
**ç®€å•Skill**ï¼š<50KB
**ä¸­ç­‰Skill**ï¼š50-200KB
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼š>400KB


**æ–‡ä»¶/ç›®å½•**ï¼š**ç»´æŠ¤éš¾åº¦**
**ç®€å•Skill**ï¼šä½
**ä¸­ç­‰Skill**ï¼šä¸­
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼šé«˜


**æ–‡ä»¶/ç›®å½•**ï¼š**é€‚ç”¨åœºæ™¯**
**ç®€å•Skill**ï¼šå•ä¸€ä»»åŠ¡
**ä¸­ç­‰Skill**ï¼šå¤šæ­¥éª¤å·¥ä½œæµ
**å¤æ‚Skill(å…¬ä¼—å·åŠ©æ‰‹)**ï¼šä¼ä¸šçº§ç”Ÿäº§åŠ›å·¥å…·


**ç®€å•Skillç¤ºä¾‹**: ä»£ç æ³¨é‡Šç”Ÿæˆå™¨
- åªéœ€skill.yaml + 1ä¸ªprompt + 0ä¸ªscript
- é€‚åˆåˆå­¦è€…ç»ƒæ‰‹

**ä¸­ç­‰Skillç¤ºä¾‹**: APIæ–‡æ¡£ç”Ÿæˆå™¨
- skill.yaml + 3ä¸ªprompts + 2ä¸ªscripts
- åŒ…å«å‚æ•°æå–ã€æ ¼å¼è½¬æ¢ã€è´¨é‡æ£€æŸ¥

**å¤æ‚Skillç¤ºä¾‹**: å…¬ä¼—å·å†™ä½œåŠ©æ‰‹
- å®Œæ•´çš„æ•°æ®é©±åŠ¨ç³»ç»Ÿ
- 12ä¸ªæç¤ºè¯æ–‡ä»¶,6ä¸ªå¤„ç†è„šæœ¬
- 82ç¯‡å†å²æ•°æ®æ”¯æ’‘
- æŒç»­è¿­ä»£ä¼˜åŒ–çš„è§„åˆ™å¼•æ“

### 2.2 skill.yamlé…ç½®è¯¦è§£
`skill.yaml`æ˜¯Skillçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶,å®šä¹‰äº†Skillçš„å…ƒä¿¡æ¯ã€è§¦å‘æ¡ä»¶ã€èƒ½åŠ›å£°æ˜å’Œä¾èµ–å…³ç³»ã€‚

#### é…ç½®å­—æ®µå®Œæ•´è¯´æ˜è¡¨

**å­—æ®µå**ï¼š`name`
**ç±»å‹**ï¼šstring
**å¿…å¡«**ï¼šâœ…
**é»˜è®¤å€¼**ï¼š-
**è¯´æ˜**ï¼šSkillæ˜¾ç¤ºåç§°,æ”¯æŒä¸­è‹±æ–‡


**å­—æ®µå**ï¼š`description`
**ç±»å‹**ï¼šstring
**å¿…å¡«**ï¼šâœ…
**é»˜è®¤å€¼**ï¼š-
**è¯´æ˜**ï¼šç®€çŸ­æè¿°(å»ºè®®<100å­—)


**å­—æ®µå**ï¼š`version`
**ç±»å‹**ï¼šstring
**å¿…å¡«**ï¼šâœ…
**é»˜è®¤å€¼**ï¼š"1.0.0"
**è¯´æ˜**ï¼šè¯­ä¹‰åŒ–ç‰ˆæœ¬å·(SemVer 2.0.0)


**å­—æ®µå**ï¼š`author`
**ç±»å‹**ï¼šstring
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š-
**è¯´æ˜**ï¼šä½œè€…ä¿¡æ¯


**å­—æ®µå**ï¼š`data_version`
**ç±»å‹**ï¼šstring
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š-
**è¯´æ˜**ï¼šæ•°æ®ç‰ˆæœ¬(æ•°æ®é©±åŠ¨Skillä¸“ç”¨)


**å­—æ®µå**ï¼š`debug.enabled`
**ç±»å‹**ï¼šboolean
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼šfalse
**è¯´æ˜**ï¼šæ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼


**å­—æ®µå**ï¼š`debug.load_priority`
**ç±»å‹**ï¼šstring
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š"global"
**è¯´æ˜**ï¼šåŠ è½½ä¼˜å…ˆçº§: global/project


**å­—æ®µå**ï¼š`debug.override_global`
**ç±»å‹**ï¼šboolean
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼šfalse
**è¯´æ˜**ï¼šæ˜¯å¦è¦†ç›–å…¨å±€é…ç½®


**å­—æ®µå**ï¼š`triggers.keywords`
**ç±»å‹**ï¼šarray
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š[]
**è¯´æ˜**ï¼šå…³é”®è¯è§¦å‘åˆ—è¡¨


**å­—æ®µå**ï¼š`triggers.patterns`
**ç±»å‹**ï¼šarray
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š[]
**è¯´æ˜**ï¼šæ­£åˆ™æ¨¡å¼è§¦å‘åˆ—è¡¨


**å­—æ®µå**ï¼š`triggers.contexts`
**ç±»å‹**ï¼šarray
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š[]
**è¯´æ˜**ï¼šä¸Šä¸‹æ–‡è§¦å‘æ¡ä»¶


**å­—æ®µå**ï¼š`commands`
**ç±»å‹**ï¼šarray
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š[]
**è¯´æ˜**ï¼šå‘½ä»¤å®šä¹‰åˆ—è¡¨


**å­—æ®µå**ï¼š`capabilities`
**ç±»å‹**ï¼šarray
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š[]
**è¯´æ˜**ï¼šèƒ½åŠ›å£°æ˜åˆ—è¡¨


**å­—æ®µå**ï¼š`scripts`
**ç±»å‹**ï¼šarray
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š[]
**è¯´æ˜**ï¼šè„šæœ¬æ¸…å•


**å­—æ®µå**ï¼š`prompt_files`
**ç±»å‹**ï¼šobject
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š{}
**è¯´æ˜**ï¼šæç¤ºè¯æ–‡ä»¶æ˜ å°„


**å­—æ®µå**ï¼š`dependencies`
**ç±»å‹**ï¼šobject
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š{}
**è¯´æ˜**ï¼šå¤–éƒ¨ä¾èµ–å£°æ˜


**å­—æ®µå**ï¼š`data_dependencies`
**ç±»å‹**ï¼šobject
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š{}
**è¯´æ˜**ï¼šæ•°æ®ä¾èµ–(æ•°æ®é©±åŠ¨ä¸“ç”¨)


**å­—æ®µå**ï¼š`quality_standards`
**ç±»å‹**ï¼šobject
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š{}
**è¯´æ˜**ï¼šè´¨é‡æ ‡å‡†å®šä¹‰


**å­—æ®µå**ï¼š`changelog`
**ç±»å‹**ï¼šarray
**å¿…å¡«**ï¼šâŒ
**é»˜è®¤å€¼**ï¼š[]
**è¯´æ˜**ï¼šç‰ˆæœ¬å†å²è®°å½•


#### ç‰ˆæœ¬å·è¯­ä¹‰åŒ–è§„èŒƒ(SemVer 2.0.0)
```
MAJOR.MINOR.PATCH (ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬)

è§„åˆ™:
1ã€MAJOR: ä¸å…¼å®¹çš„APIå˜æ›´
   ç¤ºä¾‹: 1.x.x -> 2.0.0 (æ”¹å˜äº†æ ¸å¿ƒæç¤ºè¯ç»“æ„)

2ã€MINOR: å‘åå…¼å®¹çš„åŠŸèƒ½æ–°å¢
   ç¤ºä¾‹: 1.5.x -> 1.6.0 (æ–°å¢æ ‡é¢˜è¯„åˆ†åŠŸèƒ½)

3ã€PATCH: å‘åå…¼å®¹çš„bugä¿®å¤
   ç¤ºä¾‹: 1.5.2 -> 1.5.3 (ä¿®å¤è´¨é‡æ£€æµ‹è¯¯æŠ¥)

ç‰¹æ®Šæ ‡è®°:
- Alphaç‰ˆæœ¬: 1.0.0-alpha.1
- Betaç‰ˆæœ¬: 1.0.0-beta.2
- Release Candidate: 1.0.0-rc.1
```

**ç‰ˆæœ¬å‡çº§ç¤ºä¾‹** (å…¬ä¼—å·å†™ä½œåŠ©æ‰‹çš„çœŸå®æ¼”è¿›):
```yaml
# V6.0.0 -> V6.1.0 (MINORæ›´æ–°)
V6.1.0:
  - æ–°å¢: æç®€å¼€å¤´æ ¼å¼
  - æ–°å¢: ç¦ç”¨è¡¨æ ¼è§„èŒƒ
  - å‘åå…¼å®¹: âœ…

# V6.1.0 -> V7.0.0 (MAJORæ›´æ–°)
V7.0.0:
  - ç ´åæ€§å˜æ›´: åˆ é™¤FOMOå…¬å¼(æ•°æ®éªŒè¯0å‘½ä¸­)
  - é‡æ„: æ ‡é¢˜è¯„åˆ†ç®—æ³•å®Œå…¨é‡å†™
  - å‘åå…¼å®¹: âŒ
```

#### é…ç½®éªŒè¯è„šæœ¬
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
skill.yamlé…ç½®éªŒè¯è„šæœ¬ V1.0.0
æ£€æŸ¥skill.yamlæ˜¯å¦ç¬¦åˆè§„èŒƒ
"""

import sys
import yaml
from pathlib import Path
from typing import Dict, List, Tuple

class SkillYAMLValidator:
    """Skillé…ç½®éªŒè¯å™¨"""

    REQUIRED_FIELDS = ['name', 'description', 'version']
    VERSION_PATTERN = r'^\d+\.\d+\.\d+(-[a-z]+\.\d+)?$'

    def __init__(self, yaml_path: str):
        self.yaml_path = Path(yaml_path)
        self.errors: List[str] = []
        self.warnings: List[str] = []

    def validate(self) -> Tuple[bool, List[str], List[str]]:
        """æ‰§è¡Œå®Œæ•´éªŒè¯"""
        if not self.yaml_path.exists():
            self.errors.append(f"æ–‡ä»¶ä¸å­˜åœ¨: {self.yaml_path}")
            return False, self.errors, self.warnings

        try:
            with open(self.yaml_path, 'r', encoding='utf-8') as f:
                config = yaml.safe_load(f)
        except yaml.YAMLError as e:
            self.errors.append(f"YAMLè§£æå¤±è´¥: {e}")
            return False, self.errors, self.warnings

        # å¿…å¡«å­—æ®µæ£€æŸ¥
        self._check_required_fields(config)

        # ç‰ˆæœ¬å·æ ¼å¼æ£€æŸ¥
        self._check_version_format(config.get('version'))

        # è§¦å‘å™¨æ£€æŸ¥
        self._check_triggers(config.get('triggers', {}))

        # æ–‡ä»¶è·¯å¾„æ£€æŸ¥
        self._check_file_paths(config)

        is_valid = len(self.errors) == 0
        return is_valid, self.errors, self.warnings

    def _check_required_fields(self, config: Dict):
        """æ£€æŸ¥å¿…å¡«å­—æ®µ"""
        for field in self.REQUIRED_FIELDS:
            if field not in config:
                self.errors.append(f"ç¼ºå°‘å¿…å¡«å­—æ®µ: {field}")
            elif not config[field]:
                self.errors.append(f"å­—æ®µä¸èƒ½ä¸ºç©º: {field}")

    def _check_version_format(self, version: str):
        """æ£€æŸ¥ç‰ˆæœ¬å·æ ¼å¼"""
        import re
        if not version:
            return
        if not re.match(self.VERSION_PATTERN, version):
            self.errors.append(
                f"ç‰ˆæœ¬å·æ ¼å¼é”™è¯¯: {version} (åº”ä¸º: X.Y.Z æˆ– X.Y.Z-alpha.N)"
            )

    def _check_triggers(self, triggers: Dict):
        """æ£€æŸ¥è§¦å‘å™¨é…ç½®"""
        if not triggers:
            self.warnings.append("æœªé…ç½®triggers,Skillæ— æ³•è‡ªåŠ¨æ¿€æ´»")
            return

        keywords = triggers.get('keywords', [])
        if not keywords:
            self.warnings.append("æœªé…ç½®keywords,å»ºè®®è‡³å°‘æ·»åŠ 1ä¸ªå…³é”®è¯")

    def _check_file_paths(self, config: Dict):
        """æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨"""
        skill_dir = self.yaml_path.parent

        # æ£€æŸ¥prompt_files
        prompt_files = config.get('prompt_files', {})
        for key, path in prompt_files.items():
            full_path = skill_dir / path
            if not full_path.exists():
                self.warnings.append(f"æç¤ºè¯æ–‡ä»¶ä¸å­˜åœ¨: {path}")

        # æ£€æŸ¥scripts
        scripts = config.get('scripts', [])
        for script in scripts:
            script_name = script.get('name')
            if script_name:
                full_path = skill_dir / 'scripts' / script_name
                if not full_path.exists():
                    self.warnings.append(f"è„šæœ¬æ–‡ä»¶ä¸å­˜åœ¨: scripts/{script_name}")

    def generate_report(self) -> str:
        """ç”ŸæˆéªŒè¯æŠ¥å‘Š"""
        report = []
        report.append("=" * 60)
        report.append("Skillé…ç½®éªŒè¯æŠ¥å‘Š")
        report.append("=" * 60)

        if not self.errors and not self.warnings:
            report.append("âœ… é…ç½®å®Œå…¨ç¬¦åˆè§„èŒƒ!")
            return "\n".join(report)

        if self.errors:
            report.append(f"\nâŒ å‘ç° {len(self.errors)} ä¸ªé”™è¯¯:")
            for i, error in enumerate(self.errors, 1):
                report.append(f"  {i}. {error}")

        if self.warnings:
            report.append(f"\nâš ï¸  å‘ç° {len(self.warnings)} ä¸ªè­¦å‘Š:")
            for i, warning in enumerate(self.warnings, 1):
                report.append(f"  {i}. {warning}")

        return "\n".join(report)

def main():
    if len(sys.argv) < 2:
        print("ç”¨æ³•: python validate_skill_yaml.py <skill.yamlè·¯å¾„>")
        sys.exit(1)

    validator = SkillYAMLValidator(sys.argv[1])
    is_valid, errors, warnings = validator.validate()

    print(validator.generate_report())

    sys.exit(0 if is_valid else 1)

if __name__ == "__main__":
    main()
```

ğŸ“¸ **æˆªå›¾ä½ç½®**: [æ˜¾ç¤ºskill.yamlé…ç½®é”™è¯¯æ—¶çš„Claude CodeæŠ¥é”™ç•Œé¢,åŒ…å«å…·ä½“çš„é”™è¯¯å­—æ®µå’Œå»ºè®®]

#### é”™è¯¯é…ç½®å¸¸è§é—®é¢˜æ’æŸ¥è¡¨

**é”™è¯¯ç±»å‹**ï¼š**Skillæœªæ¿€æ´»**
**ç—‡çŠ¶**ï¼šè¾“å…¥è§¦å‘è¯æ— ååº”
**åŸå› **ï¼štriggersé…ç½®é”™è¯¯æˆ–ç¼ºå¤±
**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥keywordsæ‹¼å†™,è‡³å°‘é…ç½®1ä¸ª


**é”™è¯¯ç±»å‹**ï¼š**æç¤ºè¯æœªåŠ è½½**
**ç—‡çŠ¶**ï¼šAIå›å¤ä¸ç¬¦åˆSkillé£æ ¼
**åŸå› **ï¼šprompt_filesè·¯å¾„é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼šéªŒè¯ç›¸å¯¹è·¯å¾„æ˜¯å¦æ­£ç¡®


**é”™è¯¯ç±»å‹**ï¼š**è„šæœ¬æ‰§è¡Œå¤±è´¥**
**ç—‡çŠ¶**ï¼šå‘½ä»¤è°ƒç”¨è„šæœ¬æŠ¥é”™
**åŸå› **ï¼šè„šæœ¬è·¯å¾„æˆ–æƒé™é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥scriptsè·¯å¾„,æ‰§è¡Œ`chmod +x`


**é”™è¯¯ç±»å‹**ï¼š**ç‰ˆæœ¬å†²çª**
**ç—‡çŠ¶**ï¼šå¤šä¸ªSkilläº’ç›¸å¹²æ‰°
**åŸå› **ï¼šè§¦å‘è¯é‡å¤
**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨å”¯ä¸€çš„è§¦å‘è¯æˆ–patterns


**é”™è¯¯ç±»å‹**ï¼š**é…ç½®æœªç”Ÿæ•ˆ**
**ç—‡çŠ¶**ï¼šä¿®æ”¹skill.yamlåæ— å˜åŒ–
**åŸå› **ï¼šClaude Codeæœªé‡è½½
**è§£å†³æ–¹æ¡ˆ**ï¼šé‡å¯Claude Codeæˆ–æ‰§è¡Œ`/reload`


**é”™è¯¯ç±»å‹**ï¼š**YAMLè§£æé”™è¯¯**
**ç—‡çŠ¶**ï¼šåŠ è½½æ—¶æŠ¥è¯­æ³•é”™è¯¯
**åŸå› **ï¼šç¼©è¿›æˆ–ç‰¹æ®Šå­—ç¬¦é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨YAMLéªŒè¯å·¥å…·æ£€æŸ¥è¯­æ³•


**é”™è¯¯ç±»å‹**ï¼š**ä¾èµ–ç¼ºå¤±**
**ç—‡çŠ¶**ï¼šè„šæœ¬æ‰§è¡Œå¤±è´¥
**åŸå› **ï¼šPythonåŒ…æœªå®‰è£…
**è§£å†³æ–¹æ¡ˆ**ï¼šå®‰è£…dependenciesä¸­å£°æ˜çš„åŒ…


**é”™è¯¯ç±»å‹**ï¼š**data_versionä¸åŒ¹é…**
**ç—‡çŠ¶**ï¼šæ•°æ®é©±åŠ¨è§„åˆ™ä¸ä¸€è‡´
**åŸå› **ï¼šæ•°æ®æ›´æ–°åæœªåŒæ­¥
**è§£å†³æ–¹æ¡ˆ**ï¼šæ‰§è¡Œ`/data-analyze`åæ›´æ–°ç‰ˆæœ¬å·


**é”™è¯¯ç±»å‹**ï¼š**è§¦å‘ä¼˜å…ˆçº§å†²çª**
**ç—‡çŠ¶**ï¼šè§¦å‘äº†é”™è¯¯çš„Skill
**åŸå› **ï¼šå¤šSkillè§¦å‘è¯äº¤å‰
**è§£å†³æ–¹æ¡ˆ**ï¼šè®¾ç½®`debug.load_priority: "project"`


**é”™è¯¯ç±»å‹**ï¼š**ä¸­æ–‡è·¯å¾„é—®é¢˜**
**ç—‡çŠ¶**ï¼šWindowsä¸Šæ–‡ä»¶æ‰¾ä¸åˆ°
**åŸå› **ï¼šè·¯å¾„ç¼–ç é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**ï¼šé¿å…ä¸­æ–‡è·¯å¾„,ä½¿ç”¨è‹±æ–‡ç›®å½•å


**å®Œæ•´é…ç½®æ¨¡æ¿**:
```yaml
# ==================================================
# SkillåŸºæœ¬ä¿¡æ¯
# ==================================================
name: "å…¬ä¼—å·å†™ä½œåŠ©æ‰‹"                    # Skillåç§°
description: "åŸºäºæ•°æ®é©±åŠ¨çš„AIå…¬ä¼—å·å†™ä½œç³»ç»Ÿ"  # ç®€çŸ­æè¿°
version: "7.2.0"                        # è¯­ä¹‰åŒ–ç‰ˆæœ¬å·
author: "è€é‡‘"                          # ä½œè€…ä¿¡æ¯

# æ•°æ®ç‰ˆæœ¬è·Ÿè¸ª(é‡è¦:æ•°æ®é©±åŠ¨çš„Skillå¿…é¡»å£°æ˜)
data_version: "rule_validation_report.json V7.2 (2025-12-10)"

# ==================================================
# è°ƒè¯•é…ç½®
# ==================================================
debug:
  enabled: true                         # æ˜¯å¦å¯ç”¨è°ƒè¯•æ¨¡å¼
  load_priority: "project"              # åŠ è½½ä¼˜å…ˆçº§
  override_global: true                 # æ˜¯å¦è¦†ç›–å…¨å±€é…ç½®
  info: "V7.2.0ç‰ˆæœ¬å·²æ¿€æ´»"              # è°ƒè¯•ä¿¡æ¯

# ==================================================
# è§¦å‘é…ç½®
# ==================================================
triggers:
  keywords:                             # å…³é”®è¯è§¦å‘
    - "å…¬ä¼—å·"
    - "å†™æ–‡ç« "
    - "è€é‡‘é£æ ¼"
    - "/write"
    - "/hotspot"

  patterns:                             # æ­£åˆ™æ¨¡å¼è§¦å‘(å¯é€‰)
    - "å†™ä¸€ç¯‡.*æ–‡ç« "
    - "å¸®æˆ‘.*å…¬ä¼—å·"

  contexts:                             # ä¸Šä¸‹æ–‡è§¦å‘(å¯é€‰)
    - file_pattern: "articles/*.md"     # å½“ç¼–è¾‘ç‰¹å®šæ–‡ä»¶æ—¶
    - directory: "articles"             # å½“åœ¨ç‰¹å®šç›®å½•æ—¶

# ==================================================
# å‘½ä»¤å®šä¹‰
# ==================================================
commands:
  - name: "write"
    code: "01-write"                    # å¯¹åº”commands/01-write.md
    description: "å®Œæ•´å†™ä½œæµç¨‹(8æ­¥)"
    workflow: "Research -> å†™ä½œ -> æ ‡é¢˜ -> è´¨é‡æ£€æµ‹ -> ä¿å­˜"

  - name: "title-gen"
    code: "21-title-gen"
    description: "ç”Ÿæˆ5ä¸ªçˆ†æ¬¾æ ‡é¢˜"
    script: "scripts/title_generator.py"  # å…³è”çš„è„šæœ¬

# ==================================================
# èƒ½åŠ›å£°æ˜
# ==================================================
capabilities:
  - name: "æ•°æ®é©±åŠ¨çš„çˆ†æ¬¾å…¬å¼"
    description: "åŸºäºçœŸå®æ•°æ®åˆ†æçš„5å¤§å…¬å¼+3å¿…è¦æ¡ä»¶"
    source: "prompts/baokuan-rules.md"

  - name: "9ç»´åº¦è´¨é‡æ£€æµ‹"
    description: "AIè…”ã€è‡ªç„¶åº¦ã€çœŸè¯šåº¦ç­‰9ä¸ªç»´åº¦"
    script: "scripts/quality_detector.py"

# ==================================================
# è„šæœ¬æ¸…å•
# ==================================================
scripts:
  - name: "quality_detector.py"
    description: "9ç»´åº¦è´¨é‡æ£€æµ‹"
    entry_point: "python quality_detector.py"

  - name: "title_generator.py"
    description: "5å…¬å¼æ ‡é¢˜ç”Ÿæˆå™¨"
    entry_point: "python title_generator.py"
    args: ["topic", "--full"]

# ==================================================
# æç¤ºè¯æ–‡ä»¶æ˜ å°„
# ==================================================
prompt_files:
  style: "prompts/laojin-style-v6-natural.md"
  baokuan: "prompts/baokuan-rules.md"
  image: "prompts/auto-image-generator.md"

# ==================================================
# ä¾èµ–å£°æ˜
# ==================================================
dependencies:
  mcp_servers:
    - name: "WebSearch"
      description: "å†…ç½®æœç´¢(ä¼˜å…ˆä½¿ç”¨)"
      required: true

    - name: "exa"
      description: "æ·±åº¦æœç´¢å¼•æ“"
      required: false

    - name: "context7"
      description: "æŠ€æœ¯æ–‡æ¡£æŸ¥è¯¢"
      required: false

  python_packages:
    - "pyyaml>=6.0"
    - "jieba>=0.42"

  node_packages: []

# ==================================================
# æ•°æ®ä¾èµ–(æ•°æ®é©±åŠ¨Skillç‰¹æœ‰)
# ==================================================
data_dependencies:
  source: "data/rule_validation_report.json"
  version: "V7.2"
  dependent_files:
    p0_critical:
      - path: "prompts/baokuan-rules.md"
        description: "çˆ†æ¬¾å…¬å¼å’Œè¯„åˆ†æƒé‡å®šä¹‰"
      - path: "scripts/title_scorer.py"
        description: "æ ‡é¢˜è¯„åˆ†é€»è¾‘å®ç°"
    p1_important:
      - path: "scripts/quality_detector.py"
        description: "è´¨é‡æ£€æµ‹è§„åˆ™"

# ==================================================
# è´¨é‡æ ‡å‡†
# ==================================================
quality_standards:
  title_scoring:
    - "å“ç‰Œè¯(35åˆ†): Claude/Cursor/Geminiç­‰ [1.59x]"
    - "åŠ¨ä½œè¯(15åˆ†): æ‰‹æŠŠæ‰‹/æ•™ä½ /æ•™ç¨‹ç­‰ [1.95x]"

  humanity_metrics:
    - "AIè…”æ£€æµ‹ < 20åˆ†"
    - "è‡ªç„¶åº¦ > 80åˆ†"
    - "è„è¯æ£€æµ‹ = 0å¤„"

# ==================================================
# ç‰ˆæœ¬å†å²
# ==================================================
changelog:
  - version: "7.2.0"
    date: "2025-12-10"
    changes:
      - "æ–°å¢é€‰é¢˜è¿‡æ»¤å™¨V3åŒè½¨åˆ¶"
      - "åŸºäº82ç¯‡å†å²æ•°æ®éªŒè¯"
  - version: "7.1.0"
    date: "2025-12-09"
    changes:
      - "åˆ é™¤FOMOå…¬å¼(82ç¯‡é›¶å‘½ä¸­)"
```

### 2.3 promptsç›®å½•ç»„ç»‡
`prompts/`ç›®å½•æ˜¯Skillçš„çŸ¥è¯†æ ¸å¿ƒ,å­˜æ”¾æ‰€æœ‰æç¤ºè¯å’Œè§„èŒƒæ–‡æ¡£ã€‚

#### æç¤ºè¯å‘½åè§„èŒƒè¡¨

**å‘½åç±»å‹**ï¼š**åŠŸèƒ½å‹**
**å‘½åæ¨¡å¼**ï¼š`{åŠŸèƒ½}-{åŠ¨ä½œ}.md`
**ç¤ºä¾‹**ï¼š`title-gen.md`, `quality-check.md`
**é€‚ç”¨åœºæ™¯**ï¼šæ˜ç¡®åŠŸèƒ½çš„æç¤ºè¯


**å‘½åç±»å‹**ï¼š**é£æ ¼å‹**
**å‘½åæ¨¡å¼**ï¼š`{é£æ ¼å}-style.md`
**ç¤ºä¾‹**ï¼š`laojin-style.md`, `formal-style.md`
**é€‚ç”¨åœºæ™¯**ï¼šå†™ä½œé£æ ¼å®šä¹‰


**å‘½åç±»å‹**ï¼š**è§„åˆ™å‹**
**å‘½åæ¨¡å¼**ï¼š`{è§„åˆ™å}-rules.md`
**ç¤ºä¾‹**ï¼š`baokuan-rules.md`, `format-rules.md`
**é€‚ç”¨åœºæ™¯**ï¼šè§„åˆ™å’Œçº¦æŸ


**å‘½åç±»å‹**ï¼š**é˜¶æ®µå‹**
**å‘½åæ¨¡å¼**ï¼š`{é˜¶æ®µ}-{åŠ¨ä½œ}.md`
**ç¤ºä¾‹**ï¼š`pre-process.md`, `post-validate.md`
**é€‚ç”¨åœºæ™¯**ï¼šå·¥ä½œæµé˜¶æ®µ


**å‘½åç±»å‹**ï¼š**ç‰ˆæœ¬å‹**
**å‘½åæ¨¡å¼**ï¼š`{åç§°}-v{ç‰ˆæœ¬}.md`
**ç¤ºä¾‹**ï¼š`style-v6-natural.md`
**é€‚ç”¨åœºæ™¯**ï¼šç‰ˆæœ¬åŒ–ç®¡ç†


**å‘½åç±»å‹**ï¼š**é…ç½®å‹**
**å‘½åæ¨¡å¼**ï¼š`{åŠŸèƒ½}-config.md`
**ç¤ºä¾‹**ï¼š`hotspot-credibility-config.md`
**é€‚ç”¨åœºæ™¯**ï¼šé…ç½®å‚æ•°


**å‘½åæœ€ä½³å®è·µ**:
1ã€ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦(kebab-case)
2ã€é¿å…ä¸­æ–‡å‘½å(é™¤éé¢å‘ä¸­æ–‡ç”¨æˆ·çš„æ–‡æ¡£)
3ã€ç‰ˆæœ¬å·æ”¾åœ¨æ–‡ä»¶å†…éƒ¨,ä¸æ”¾æ–‡ä»¶å(é™¤ééœ€è¦åŒæ—¶ç»´æŠ¤å¤šç‰ˆæœ¬)
4ã€æ–‡ä»¶åä¿æŒç®€çŸ­(å»ºè®®<30ä¸ªå­—ç¬¦)

#### æç¤ºè¯ä¾èµ–å…³ç³»å›¾
```mermaid
graph TD
    A[skill.yaml] --> B[laojin-style-v6-natural.md]
    A --> C[baokuan-rules.md]
    A --> D[é€‰é¢˜ç­–ç•¥æŒ‡å—.md]

    B --> E[format-rules.md]
    B --> F[writing-checklist.md]

    C --> G[title-gen prompt]
    C --> H[title-scorer script]

    D --> I[topic-filter script]

    E --> J[auto-image-generator.md]
    E --> K[infographic-generator.md]

    style A fill:#ff6b6b
    style B fill:#4ecdc4
    style C fill:#4ecdc4
    style D fill:#4ecdc4
    style E fill:#95e1d3
    style F fill:#95e1d3

    linkStyle 0,1,2 stroke:#ff6b6b,stroke-width:3px
    linkStyle 3,4 stroke:#4ecdc4,stroke-width:2px
```

ğŸ“¸ **æˆªå›¾ä½ç½®**: [æ˜¾ç¤ºå¤šä¸ªpromptsæ–‡ä»¶çš„Gitå†å²æ¼”è¿›,åŒ…å«diffå¯¹æ¯”å’Œcommit message]

#### æç¤ºè¯ç‰ˆæœ¬æ¼”è¿›å®Œæ•´æ¡ˆä¾‹
**laojin-styleç‰ˆæœ¬æ¼”è¿›** (V1.0 â†’ V6.1.2):
```markdown
# V1.0.0 (2025-09-15) - åˆå§‹ç‰ˆæœ¬
## å˜æ›´å†…å®¹
- åŸºç¡€äººè®¾å®šä¹‰
- ç®€å•çš„è¯­è¨€é£æ ¼è§„èŒƒ
- 3ä¸ªç¤ºä¾‹

# V2.0.0 (2025-10-01) - é‡å¤§é‡æ„
## ç ´åæ€§å˜æ›´
- é‡æ–°å®šä¹‰è€é‡‘äººè®¾(ä»"æŠ€æœ¯ä¸“å®¶"æ”¹ä¸º"æ™®é€šäººè§†è§’")
- åˆ é™¤ä¸“ä¸šæœ¯è¯­åº“(ä¸æ–°äººè®¾çŸ›ç›¾)

## æ–°å¢
- çœŸå®æ€§éªŒè¯æ¸…å•
- 10ä¸ªè¸©å‘ç»å†ç¤ºä¾‹

# V5.0.0 (2025-11-20) - è‡ªç„¶è¡¨è¾¾é©å‘½
## æ ¸å¿ƒå˜æ›´
- ä»"è¡¨æ¼”è€é‡‘"è½¬å‘"å°±æ˜¯è€é‡‘"
- è‡ªç„¶æ¯”å®Œç¾æ›´é‡è¦çš„ç†å¿µ

## æ–°å¢
- é€—å·æ–­å¥è§„èŒƒ
- å£è¯­åŒ–è¡¨è¾¾åº“

# V6.0.0 (2025-11-28) - åŒæ¨¡å¼å·¥ä½œæµ
## æ–°å¢
- æ–°å¢"å³åˆ»æ¨¡å¼"(å¿«é€Ÿè¾“å‡º)
- ä¿ç•™"æ·±æ€æ¨¡å¼"(æ‰“ç£¨è´¨é‡)

# V6.1.0 (2025-12-05) - æ ¼å¼ä¼˜åŒ–
## æ–°å¢
- æç®€å¼€å¤´æ ¼å¼
- ç¦ç”¨Markdownè¡¨æ ¼

# V6.1.2 (2025-12-06) - Bugä¿®å¤
## ä¿®å¤
- ä¿®å¤å¤‡é€‰æ ‡é¢˜æ ¼å¼é—®é¢˜
- ä¿®å¤çŸ¥è¯†åº“æç¤ºé‡å¤æ˜¾ç¤º
```

**ç‰ˆæœ¬æ¼”è¿›çš„å®Œæ•´diffç¤ºä¾‹** (V6.0.0 â†’ V6.1.0):
```diff
--- laojin-style-v6.0.md
+++ laojin-style-v6.1.md
@@ -15,12 +15,8 @@
 ## ä¸€ã€æ–‡ç« ç»“æ„è§„èŒƒ

-### å¼€å¤´æ ¼å¼(æ ‡å‡†ç‰ˆ)
+### å¼€å¤´æ ¼å¼(æç®€ç‰ˆ)
 ```
 # æ­£æ–‡æ ‡é¢˜

----
-
-**å¤‡é€‰æ ‡é¢˜**:
-1. [å¤‡é€‰æ ‡é¢˜1]
-2. [å¤‡é€‰æ ‡é¢˜2]
+# å¤‡é€‰æ ‡é¢˜1
+# å¤‡é€‰æ ‡é¢˜2

-### æ­£æ–‡å†…å®¹è§„èŒƒ
+### æ­£æ–‡å†…å®¹è§„èŒƒ(ç¦ç”¨è¡¨æ ¼!)

+**é‡è¦**: Markdownè¡¨æ ¼åœ¨é£ä¹¦ã€å…¬ä¼—å·ç­‰å¹³å°æ¸²æŸ“æ•ˆæœå·®,å®Œå…¨ç¦æ­¢ä½¿ç”¨ã€‚
+**æ›¿ä»£æ–¹æ¡ˆ**: ä½¿ç”¨åŠ ç²—æ ‡é¢˜ + åˆ—è¡¨å±•ç¤ºæ•°æ®ã€‚
```

#### æç¤ºè¯é‡å¤åº¦æ£€æµ‹è„šæœ¬
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æç¤ºè¯é‡å¤åº¦æ£€æµ‹è„šæœ¬ V1.0.0
è®¡ç®—promptsç›®å½•ä¸­æ–‡ä»¶é—´çš„ç›¸ä¼¼åº¦,å‘ç°é‡å¤å†…å®¹
"""

import sys
from pathlib import Path
from typing import Dict, List, Tuple
from difflib import SequenceMatcher

def calculate_similarity(text1: str, text2: str) -> float:
    """è®¡ç®—ä¸¤ä¸ªæ–‡æœ¬çš„ç›¸ä¼¼åº¦(0.0-1.0)"""
    return SequenceMatcher(None, text1, text2).ratio()

def read_prompt_file(file_path: Path) -> str:
    """è¯»å–æç¤ºè¯æ–‡ä»¶å†…å®¹"""
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            return f.read()
    except Exception as e:
        print(f"è¯»å–å¤±è´¥ {file_path}: {e}")
        return ""

def analyze_prompts_directory(prompts_dir: str) -> List[Tuple[str, str, float]]:
    """åˆ†æpromptsç›®å½•,è¿”å›ç›¸ä¼¼åº¦>0.7çš„æ–‡ä»¶å¯¹"""
    prompts_path = Path(prompts_dir)
    if not prompts_path.exists():
        print(f"ç›®å½•ä¸å­˜åœ¨: {prompts_dir}")
        return []

    # è¯»å–æ‰€æœ‰.mdæ–‡ä»¶
    prompt_files = list(prompts_path.glob("*.md"))
    if len(prompt_files) < 2:
        print("è‡³å°‘éœ€è¦2ä¸ªæç¤ºè¯æ–‡ä»¶æ‰èƒ½æ¯”è¾ƒ")
        return []

    # è¯»å–å†…å®¹
    file_contents: Dict[str, str] = {}
    for file_path in prompt_files:
        content = read_prompt_file(file_path)
        if content:
            file_contents[file_path.name] = content

    # è®¡ç®—ä¸¤ä¸¤ç›¸ä¼¼åº¦
    high_similarity_pairs = []
    file_names = list(file_contents.keys())

    for i, file1 in enumerate(file_names):
        for file2 in file_names[i+1:]:
            similarity = calculate_similarity(
                file_contents[file1],
                file_contents[file2]
            )
            if similarity > 0.3:  # ç›¸ä¼¼åº¦>30%å°±æŠ¥å‘Š
                high_similarity_pairs.append((file1, file2, similarity))

    # æŒ‰ç›¸ä¼¼åº¦é™åºæ’åº
    high_similarity_pairs.sort(key=lambda x: x[2], reverse=True)
    return high_similarity_pairs

def generate_report(similar_pairs: List[Tuple[str, str, float]]) -> str:
    """ç”Ÿæˆåˆ†ææŠ¥å‘Š"""
    report = []
    report.append("=" * 70)
    report.append("æç¤ºè¯é‡å¤åº¦åˆ†ææŠ¥å‘Š")
    report.append("=" * 70)

    if not similar_pairs:
        report.append("\nâœ… æœªå‘ç°é«˜é‡å¤åº¦å†…å®¹(ç›¸ä¼¼åº¦>30%)")
        return "\n".join(report)

    report.append(f"\nå‘ç° {len(similar_pairs)} å¯¹ç›¸ä¼¼æ–‡ä»¶:\n")

    for i, (file1, file2, similarity) in enumerate(similar_pairs, 1):
        percent = similarity * 100
        status = "ğŸ”´" if percent > 70 else "ğŸŸ¡" if percent > 50 else "ğŸŸ¢"

        report.append(f"{i}. {status} {file1} <-> {file2}")
        report.append(f"   ç›¸ä¼¼åº¦: {percent:.1f}%")

        if percent > 70:
            report.append("   âš ï¸  å»ºè®®: è€ƒè™‘åˆå¹¶è¿™ä¸¤ä¸ªæ–‡ä»¶,é¿å…ç»´æŠ¤é‡å¤å†…å®¹")
        elif percent > 50:
            report.append("   ğŸ’¡ å»ºè®®: æå–å…±åŒéƒ¨åˆ†åˆ°å•ç‹¬æ–‡ä»¶,å…¶ä»–æ–‡ä»¶å¼•ç”¨")

        report.append("")

    report.append("=" * 70)
    report.append("è¯´æ˜:")
    report.append("- ğŸ”´ >70%: é«˜åº¦é‡å¤,å»ºè®®åˆå¹¶")
    report.append("- ğŸŸ¡ 50-70%: ä¸­åº¦é‡å¤,è€ƒè™‘æå–å…¬å…±éƒ¨åˆ†")
    report.append("- ğŸŸ¢ 30-50%: ä½åº¦é‡å¤,æ­£å¸¸èŒƒå›´")

    return "\n".join(report)

def main():
    if len(sys.argv) < 2:
        print("ç”¨æ³•: python check_prompt_similarity.py <promptsç›®å½•è·¯å¾„>")
        print("ç¤ºä¾‹: python check_prompt_similarity.py .claude/skills/my-skill/prompts")
        sys.exit(1)

    prompts_dir = sys.argv[1]
    similar_pairs = analyze_prompts_directory(prompts_dir)
    print(generate_report(similar_pairs))

if __name__ == "__main__":
    main()
```

**ç»„ç»‡åŸåˆ™**:

1ã€**æŒ‰åŠŸèƒ½åˆ†ç±»**
```
prompts/
â”œâ”€â”€ core/                   # æ ¸å¿ƒæç¤ºè¯
â”‚   â”œâ”€â”€ main-style.md       # ä¸»é£æ ¼å®šä¹‰
â”‚   â””â”€â”€ base-rules.md       # åŸºç¡€è§„åˆ™
â”œâ”€â”€ features/               # åŠŸèƒ½æç¤ºè¯
â”‚   â”œâ”€â”€ title-gen.md        # æ ‡é¢˜ç”Ÿæˆ
â”‚   â””â”€â”€ quality-check.md    # è´¨é‡æ£€æŸ¥
â””â”€â”€ reference/              # å‚è€ƒèµ„æ–™
    â”œâ”€â”€ examples.md         # ç¤ºä¾‹é›†
    â””â”€â”€ anti-patterns.md    # åæ¨¡å¼
```

2ã€**æŒ‰é˜¶æ®µåˆ†ç±»**
```
prompts/
â”œâ”€â”€ pre-process/            # é¢„å¤„ç†é˜¶æ®µ
â”œâ”€â”€ generation/             # ç”Ÿæˆé˜¶æ®µ
â”œâ”€â”€ post-process/           # åå¤„ç†é˜¶æ®µ
â””â”€â”€ validation/             # éªŒè¯é˜¶æ®µ
```

**å®æˆ˜ç¤ºä¾‹: å…¬ä¼—å·å†™ä½œåŠ©æ‰‹çš„promptsç»„ç»‡**:
```
prompts/
â”œâ”€â”€ laojin-style-v6-natural.md    # è€é‡‘å†™ä½œé£æ ¼(680è¡Œ)
â”œâ”€â”€ baokuan-rules.md              # çˆ†æ¬¾è§„å¾‹æ‰‹å†Œ(1150è¡Œ)
â”œâ”€â”€ é€‰é¢˜ç­–ç•¥æŒ‡å—.md               # é€‰é¢˜ç­–ç•¥(302è¡Œ)
â”œâ”€â”€ format-rules.md               # æ ¼å¼è§„èŒƒ
â”œâ”€â”€ auto-image-generator.md       # è‡ªåŠ¨é…å›¾è§„åˆ™
â”œâ”€â”€ infographic-generator.md      # ä¿¡æ¯å›¾è§„åˆ™
â”œâ”€â”€ writing-checklist.md          # å†™ä½œæ£€æŸ¥æ¸…å•
â”œâ”€â”€ hotspot-sources-china.md      # å›½å†…çƒ­ç‚¹æº
â”œâ”€â”€ hotspot-sources-international.md  # å›½é™…çƒ­ç‚¹æº
â”œâ”€â”€ hotspot-access-methods.md     # çƒ­ç‚¹è®¿é—®æ–¹æ³•
â””â”€â”€ hotspot-credibility-config.md # å¯ä¿¡åº¦é…ç½®
```

**æ–‡ä»¶å‘½åè§„èŒƒ**:
- ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦: `baokuan-rules.md`
- ç‰ˆæœ¬æ ‡è¯†æ”¾åœ¨æ–‡ä»¶å†…éƒ¨,ä¸æ”¾åœ¨æ–‡ä»¶å: æ–‡ä»¶å`style.md`,å†…éƒ¨`V6.1.2`
- ä¸­æ–‡å‘½åç”¨äºé¢å‘ç”¨æˆ·çš„æ–‡æ¡£: `é€‰é¢˜ç­–ç•¥æŒ‡å—.md`

### 2.4 scriptsç›®å½•è¯¦è§£
`scripts/`ç›®å½•å­˜æ”¾å¯æ‰§è¡Œçš„å·¥å…·è„šæœ¬,è¿™äº›è„šæœ¬æ‰©å±•äº†Claude Codeçš„èƒ½åŠ›è¾¹ç•Œã€‚

#### è„šæœ¬è¯­è¨€é€‰æ‹©å†³ç­–æ ‘
```
å¼€å§‹
 |
 â”œâ”€ éœ€è¦æ•°æ®å¤„ç†/åˆ†æ? â”€â”€â”€YESâ”€â”€> Python (pandas, numpy)
 |                          |
 |                          â””â”€ éœ€è¦NLP? â”€â”€â”€YESâ”€â”€> Python (jieba, transformers)
 |
 â”œâ”€ éœ€è¦æ–‡ä»¶æ“ä½œ? â”€â”€â”€YESâ”€â”€> å¤æ‚é€»è¾‘?
 |                          â”œâ”€ YES -> Python (pathlib, shutil)
 |                          â””â”€ NO  -> Bash (find, grep, sed)
 |
 â”œâ”€ éœ€è¦Webè‡ªåŠ¨åŒ–? â”€â”€â”€YESâ”€â”€> JavaScript (Puppeteer)
 |
 â”œâ”€ éœ€è¦APIè°ƒç”¨? â”€â”€â”€YESâ”€â”€> ç®€å•?
 |                         â”œâ”€ YES -> curl + jq (Bash)
 |                         â””â”€ NO  -> Python (requests, aiohttp)
 |
 â””â”€ éœ€è¦ç³»ç»Ÿçº§æ“ä½œ? â”€â”€â”€YESâ”€â”€> Bash (chmod, chown, cron)
```

**è¯­è¨€é€‰æ‹©å»ºè®®**:


**ä»»åŠ¡ç±»å‹**ï¼šæ–‡æœ¬åˆ†æ
**æ¨èè¯­è¨€**ï¼šPython
**ç†ç”±**ï¼šNLPåº“ä¸°å¯Œ
**å…¸å‹åº“**ï¼šjieba, re, difflib


**ä»»åŠ¡ç±»å‹**ï¼šæ•°æ®åˆ†æ
**æ¨èè¯­è¨€**ï¼šPython
**ç†ç”±**ï¼špandaså¼ºå¤§
**å…¸å‹åº“**ï¼špandas, numpy, matplotlib


**ä»»åŠ¡ç±»å‹**ï¼šæ–‡ä»¶æ‰¹å¤„ç†
**æ¨èè¯­è¨€**ï¼šBash
**ç†ç”±**ï¼šç®€æ´é«˜æ•ˆ
**å…¸å‹åº“**ï¼šfind, xargs, awk


**ä»»åŠ¡ç±»å‹**ï¼šWebæŠ“å–
**æ¨èè¯­è¨€**ï¼šPython
**ç†ç”±**ï¼šåº“æˆç†Ÿ
**å…¸å‹åº“**ï¼šrequests, BeautifulSoup


**ä»»åŠ¡ç±»å‹**ï¼šJSONå¤„ç†
**æ¨èè¯­è¨€**ï¼šPython/jq
**ç†ç”±**ï¼šçµæ´»
**å…¸å‹åº“**ï¼šjson, jq


**ä»»åŠ¡ç±»å‹**ï¼šå›¾ç‰‡å¤„ç†
**æ¨èè¯­è¨€**ï¼šPython
**ç†ç”±**ï¼šPILå¼ºå¤§
**å…¸å‹åº“**ï¼šPillow, opencv


**ä»»åŠ¡ç±»å‹**ï¼šå‰ç«¯è‡ªåŠ¨åŒ–
**æ¨èè¯­è¨€**ï¼šJavaScript
**ç†ç”±**ï¼šæµè§ˆå™¨åŸç”Ÿ
**å…¸å‹åº“**ï¼šPuppeteer, Playwright


#### è„šæœ¬æ¨¡æ¿åº“
**æ¨¡æ¿1: æ•°æ®å¤„ç†è„šæœ¬**
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æ•°æ®å¤„ç†æ¨¡æ¿ V1.0.0
ç”¨äºå¤„ç†JSON/CSVæ•°æ®çš„é€šç”¨æ¨¡æ¿
"""

import sys
import json
from pathlib import Path
from typing import Dict, List, Any
from dataclasses import dataclass, asdict

@dataclass
class ProcessResult:
    """å¤„ç†ç»“æœæ•°æ®ç±»"""
    success: bool
    processed_count: int
    data: Dict[str, Any]
    errors: List[str]

class DataProcessor:
    """æ•°æ®å¤„ç†å™¨"""

    def __init__(self, input_path: str):
        self.input_path = Path(input_path)
        self.data: List[Dict] = []
        self.errors: List[str] = []

    def load_data(self) -> bool:
        """åŠ è½½æ•°æ®"""
        try:
            with open(self.input_path, 'r', encoding='utf-8') as f:
                self.data = json.load(f)
            return True
        except Exception as e:
            self.errors.append(f"åŠ è½½å¤±è´¥: {e}")
            return False

    def process(self) -> ProcessResult:
        """å¤„ç†æ•°æ®"""
        processed_count = 0

        for item in self.data:
            try:
                # åœ¨è¿™é‡Œæ·»åŠ å¤„ç†é€»è¾‘
                processed_item = self._process_item(item)
                processed_count += 1
            except Exception as e:
                self.errors.append(f"å¤„ç†å¤±è´¥: {e}")

        return ProcessResult(
            success=len(self.errors) == 0,
            processed_count=processed_count,
            data={"total": len(self.data)},
            errors=self.errors
        )

    def _process_item(self, item: Dict) -> Dict:
        """å¤„ç†å•ä¸ªæ•°æ®é¡¹"""
        # å®ç°å…·ä½“çš„å¤„ç†é€»è¾‘
        return item

    def save_results(self, result: ProcessResult, output_path: str):
        """ä¿å­˜å¤„ç†ç»“æœ"""
        output = Path(output_path)
        with open(output, 'w', encoding='utf-8') as f:
            json.dump(asdict(result), f, ensure_ascii=False, indent=2)

def main():
    if len(sys.argv) < 2:
        print("ç”¨æ³•: python data_processor.py <è¾“å…¥æ–‡ä»¶>")
        sys.exit(1)

    processor = DataProcessor(sys.argv[1])

    if not processor.load_data():
        print("âŒ æ•°æ®åŠ è½½å¤±è´¥")
        sys.exit(1)

    result = processor.process()

    print(f"âœ… å¤„ç†å®Œæˆ: {result.processed_count}/{len(processor.data)} é¡¹")
    if result.errors:
        print(f"âš ï¸  é‡åˆ° {len(result.errors)} ä¸ªé”™è¯¯")

if __name__ == "__main__":
    main()
```

**æ¨¡æ¿2: æ–‡ä»¶æ“ä½œè„šæœ¬**
```bash
#!/bin/bash
# æ–‡ä»¶æ‰¹å¤„ç†æ¨¡æ¿ V1.0.0

set -euo pipefail  # ä¸¥æ ¼æ¨¡å¼: é‡é”™é€€å‡º,æœªå®šä¹‰å˜é‡æŠ¥é”™,ç®¡é“å¤±è´¥ä¼ é€’

# é¢œè‰²å®šä¹‰
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# æ—¥å¿—å‡½æ•°
log_info() {
    echo -e "${GREEN}[INFO]${NC} $1"
}

log_warn() {
    echo -e "${YELLOW}[WARN]${NC} $1"
}

log_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# å‚æ•°æ£€æŸ¥
if [ $# -lt 1 ]; then
    log_error "ç”¨æ³•: $0 <ç›®æ ‡ç›®å½•>"
    exit 1
fi

TARGET_DIR="$1"

if [ ! -d "$TARGET_DIR" ]; then
    log_error "ç›®å½•ä¸å­˜åœ¨: $TARGET_DIR"
    exit 1
fi

# ä¸»å¤„ç†é€»è¾‘
log_info "å¼€å§‹å¤„ç†ç›®å½•: $TARGET_DIR"

file_count=0
processed_count=0

# æŸ¥æ‰¾å¹¶å¤„ç†æ–‡ä»¶
while IFS= read -r -d '' file; do
    ((file_count++))

    # åœ¨è¿™é‡Œæ·»åŠ å¤„ç†é€»è¾‘
    log_info "å¤„ç†: $file"

    # ç¤ºä¾‹: è½¬æ¢æ–‡ä»¶ç¼–ç 
    # iconv -f GBK -t UTF-8 "$file" > "${file}.tmp" && mv "${file}.tmp" "$file"

    ((processed_count++))

done < <(find "$TARGET_DIR" -type f -name "*.txt" -print0)

log_info "å¤„ç†å®Œæˆ: $processed_count/$file_count ä¸ªæ–‡ä»¶"
```

**æ¨¡æ¿3: APIè°ƒç”¨è„šæœ¬**
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
APIè°ƒç”¨æ¨¡æ¿ V1.0.0
å¸¦é‡è¯•æœºåˆ¶ã€é€Ÿç‡é™åˆ¶çš„HTTPå®¢æˆ·ç«¯
"""

import sys
import time
from typing import Dict, Optional
import requests
from requests.adapters import HTTPAdapter
from requests.packages.urllib3.util.retry import Retry

class APIClient:
    """HTTP APIå®¢æˆ·ç«¯"""

    def __init__(self, base_url: str, api_key: Optional[str] = None):
        self.base_url = base_url.rstrip('/')
        self.api_key = api_key
        self.session = self._create_session()

    def _create_session(self) -> requests.Session:
        """åˆ›å»ºå¸¦é‡è¯•æœºåˆ¶çš„Session"""
        session = requests.Session()

        # é…ç½®é‡è¯•ç­–ç•¥
        retry_strategy = Retry(
            total=3,                # æœ€å¤šé‡è¯•3æ¬¡
            backoff_factor=1,       # æŒ‡æ•°é€€é¿: 1s, 2s, 4s
            status_forcelist=[429, 500, 502, 503, 504],
            allowed_methods=["GET", "POST"]
        )

        adapter = HTTPAdapter(max_retries=retry_strategy)
        session.mount("http://", adapter)
        session.mount("https://", adapter)

        # è®¾ç½®é»˜è®¤header
        session.headers.update({
            'User-Agent': 'SkillScript/1.0',
            'Content-Type': 'application/json'
        })

        if self.api_key:
            session.headers['Authorization'] = f'Bearer {self.api_key}'

        return session

    def get(self, endpoint: str, params: Optional[Dict] = None) -> Dict:
        """GETè¯·æ±‚"""
        url = f"{self.base_url}/{endpoint.lstrip('/')}"

        try:
            response = self.session.get(url, params=params, timeout=30)
            response.raise_for_status()
            return response.json()
        except requests.RequestException as e:
            print(f"âŒ è¯·æ±‚å¤±è´¥: {e}")
            raise

    def post(self, endpoint: str, data: Dict) -> Dict:
        """POSTè¯·æ±‚"""
        url = f"{self.base_url}/{endpoint.lstrip('/')}"

        try:
            response = self.session.post(url, json=data, timeout=30)
            response.raise_for_status()
            return response.json()
        except requests.RequestException as e:
            print(f"âŒ è¯·æ±‚å¤±è´¥: {e}")
            raise

def main():
    # ç¤ºä¾‹ä½¿ç”¨
    client = APIClient("https://api.example.com", api_key="your_key")

    try:
        result = client.get("/endpoint", params={"query": "test"})
        print(f"âœ… æˆåŠŸ: {result}")
    except Exception as e:
        print(f"âŒ å¤±è´¥: {e}")
        sys.exit(1)

if __name__ == "__main__":
    main()
```

#### è„šæœ¬æ€§èƒ½åŸºå‡†æµ‹è¯•
**æµ‹è¯•åœºæ™¯**: å¤„ç†1000ä¸ªJSONæ–‡ä»¶,æ¯ä¸ª10KB


**æŒ‡æ ‡**ï¼š**æ‰§è¡Œæ—¶é—´**
**Python**ï¼š2.3ç§’
**Bash**ï¼š1.8ç§’
**Node.js**ï¼š2.1ç§’
**è¯´æ˜**ï¼šBashæœ€å¿«(æ— å¯åŠ¨å¼€é”€)


**æŒ‡æ ‡**ï¼š**å†…å­˜å ç”¨**
**Python**ï¼š45MB
**Bash**ï¼š12MB
**Node.js**ï¼š85MB
**è¯´æ˜**ï¼šBashæœ€çœå†…å­˜


**æŒ‡æ ‡**ï¼š**ä»£ç è¡Œæ•°**
**Python**ï¼š50è¡Œ
**Bash**ï¼š30è¡Œ
**Node.js**ï¼š60è¡Œ
**è¯´æ˜**ï¼šBashæœ€ç®€æ´


**æŒ‡æ ‡**ï¼š**å¯è¯»æ€§**
**Python**ï¼šâ­â­â­â­â­
**Bash**ï¼šâ­â­â­
**Node.js**ï¼šâ­â­â­â­
**è¯´æ˜**ï¼šPythonæœ€æ˜“è¯»


**æŒ‡æ ‡**ï¼š**é”™è¯¯å¤„ç†**
**Python**ï¼šå®Œå–„
**Bash**ï¼šåŸºç¡€
**Node.js**ï¼šå®Œå–„
**è¯´æ˜**ï¼šBashè¾ƒå¼±


**æŒ‡æ ‡**ï¼š**è·¨å¹³å°**
**Python**ï¼šâœ…
**Bash**ï¼šâš ï¸ (Windowséœ€Git Bash)
**Node.js**ï¼šâœ…
**è¯´æ˜**ï¼šPython/Node.jsæ›´é€šç”¨


**ç»“è®º**:
- **ç®€å•ä»»åŠ¡**: ä¼˜å…ˆBash (find + xargs)
- **å¤æ‚é€»è¾‘**: ä¼˜å…ˆPython (æ˜“ç»´æŠ¤,åº“ä¸°å¯Œ)
- **å‰ç«¯ç›¸å…³**: ä¼˜å…ˆNode.js (npmç”Ÿæ€)

ğŸ“¸ **æˆªå›¾ä½ç½®**: [æ˜¾ç¤ºè„šæœ¬æ‰§è¡Œæ—¶çš„è¯¦ç»†æ—¥å¿—è¾“å‡º,åŒ…å«å¤„ç†è¿›åº¦ã€è€—æ—¶ç»Ÿè®¡å’Œé”™è¯¯ä¿¡æ¯]

#### è„šæœ¬é”™è¯¯å¤„ç†å®Œæ•´ç¤ºä¾‹
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
å®Œæ•´é”™è¯¯å¤„ç†ç¤ºä¾‹ V1.0.0
æ¼”ç¤ºç”Ÿäº§çº§è„šæœ¬çš„å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ
"""

import sys
import logging
from pathlib import Path
from typing import Optional
from enum import Enum

# é…ç½®æ—¥å¿—
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s [%(levelname)s] %(message)s',
    handlers=[
        logging.StreamHandler(sys.stdout),
        logging.FileHandler('script.log', encoding='utf-8')
    ]
)

class ExitCode(Enum):
    """é€€å‡ºç å®šä¹‰"""
    SUCCESS = 0
    INVALID_ARGS = 1
    FILE_NOT_FOUND = 2
    PROCESSING_ERROR = 3
    UNKNOWN_ERROR = 99

class ScriptError(Exception):
    """è‡ªå®šä¹‰è„šæœ¬å¼‚å¸¸"""
    def __init__(self, message: str, exit_code: ExitCode):
        self.message = message
        self.exit_code = exit_code
        super().__init__(self.message)

class RobustProcessor:
    """å¥å£®çš„å¤„ç†å™¨"""

    def __init__(self, input_file: str):
        self.input_file = Path(input_file)
        self.logger = logging.getLogger(__name__)

    def validate_input(self):
        """éªŒè¯è¾“å…¥"""
        if not self.input_file.exists():
            raise ScriptError(
                f"æ–‡ä»¶ä¸å­˜åœ¨: {self.input_file}",
                ExitCode.FILE_NOT_FOUND
            )

        if self.input_file.stat().st_size == 0:
            raise ScriptError(
                f"æ–‡ä»¶ä¸ºç©º: {self.input_file}",
                ExitCode.INVALID_ARGS
            )

        self.logger.info(f"âœ… è¾“å…¥éªŒè¯é€šè¿‡: {self.input_file}")

    def process(self) -> bool:
        """å¤„ç†æ•°æ®(å¸¦å®Œæ•´é”™è¯¯å¤„ç†)"""
        try:
            self.validate_input()

            # ä¸»å¤„ç†é€»è¾‘
            with open(self.input_file, 'r', encoding='utf-8') as f:
                data = f.read()

            # æ¨¡æ‹Ÿå¤„ç†
            result = self._do_process(data)

            self.logger.info(f"âœ… å¤„ç†æˆåŠŸ: {result}")
            return True

        except ScriptError as e:
            # é¢„æœŸçš„ä¸šåŠ¡å¼‚å¸¸
            self.logger.error(f"âŒ è„šæœ¬é”™è¯¯: {e.message}")
            sys.exit(e.exit_code.value)

        except FileNotFoundError as e:
            # æ–‡ä»¶ç³»ç»Ÿå¼‚å¸¸
            self.logger.error(f"âŒ æ–‡ä»¶ä¸å­˜åœ¨: {e}")
            sys.exit(ExitCode.FILE_NOT_FOUND.value)

        except PermissionError as e:
            # æƒé™å¼‚å¸¸
            self.logger.error(f"âŒ æƒé™ä¸è¶³: {e}")
            sys.exit(ExitCode.PROCESSING_ERROR.value)

        except UnicodeDecodeError as e:
            # ç¼–ç å¼‚å¸¸
            self.logger.error(f"âŒ ç¼–ç é”™è¯¯: {e}")
            self.logger.info("ğŸ’¡ å»ºè®®: å°è¯•ä½¿ç”¨ --encoding å‚æ•°æŒ‡å®šç¼–ç ")
            sys.exit(ExitCode.PROCESSING_ERROR.value)

        except KeyboardInterrupt:
            # ç”¨æˆ·ä¸­æ–­
            self.logger.warning("âš ï¸  ç”¨æˆ·ä¸­æ–­æ‰§è¡Œ")
            sys.exit(130)  # Unixæ ‡å‡†: 128 + SIGINT(2)

        except Exception as e:
            # æœªé¢„æœŸçš„å¼‚å¸¸
            self.logger.exception(f"âŒ æœªçŸ¥é”™è¯¯: {e}")
            sys.exit(ExitCode.UNKNOWN_ERROR.value)

    def _do_process(self, data: str) -> str:
        """å®é™…å¤„ç†é€»è¾‘"""
        # åœ¨è¿™é‡Œå®ç°å¤„ç†é€»è¾‘
        return f"å·²å¤„ç† {len(data)} å­—èŠ‚"

def main():
    if len(sys.argv) < 2:
        print("ç”¨æ³•: python robust_processor.py <è¾“å…¥æ–‡ä»¶>")
        sys.exit(ExitCode.INVALID_ARGS.value)

    processor = RobustProcessor(sys.argv[1])
    processor.process()

if __name__ == "__main__":
    main()
```

**æ”¯æŒçš„è„šæœ¬ç±»å‹**:

1ã€**Pythonè„šæœ¬** (.py)
   - æ•°æ®å¤„ç†å’Œåˆ†æ
   - å¤æ‚ç®—æ³•å®ç°
   - æ–‡ä»¶æ“ä½œå’Œè½¬æ¢
   - APIé›†æˆ

2ã€**JavaScriptè„šæœ¬** (.js)
   - æµè§ˆå™¨è‡ªåŠ¨åŒ–
   - Node.jså·¥å…·
   - å‰ç«¯ç›¸å…³å¤„ç†

3ã€**Shellè„šæœ¬** (.sh/.bat)
   - ç³»ç»Ÿçº§æ“ä½œ
   - æ‰¹å¤„ç†ä»»åŠ¡

**è„šæœ¬å¼€å‘è§„èŒƒ**:
```python
# -*- coding: utf-8 -*-
"""
è„šæœ¬åç§° Vç‰ˆæœ¬å· - ç®€çŸ­æè¿°
è¯¦ç»†è¯´æ˜

ç‰ˆæœ¬å†å²:
- V1.0.0 (æ—¥æœŸ): åˆå§‹ç‰ˆæœ¬
- V1.1.0 (æ—¥æœŸ): æ–°å¢åŠŸèƒ½

æ•°æ®ç‰ˆæœ¬: rule_validation_report.json V7.1 (æ—¥æœŸ)
"""

import sys
from typing import Dict, List, Optional
from dataclasses import dataclass


@dataclass
class ResultType:
    """ç»“æœæ•°æ®ç±»"""
    success: bool
    data: Dict
    message: str


class ProcessorClass:
    """
    å¤„ç†å™¨ç±»

    åŠŸèƒ½è¯´æ˜...
    """

    def __init__(self, config_path: Optional[str] = None):
        """åˆå§‹åŒ–å¤„ç†å™¨"""
        self.config = self._load_config(config_path)

    def process(self, input_data: str) -> ResultType:
        """
        å¤„ç†è¾“å…¥æ•°æ®

        Args:
            input_data: è¾“å…¥æ•°æ®

        Returns:
            ResultType: å¤„ç†ç»“æœ
        """
        pass

    def generate_report(self, result: ResultType) -> str:
        """ç”ŸæˆæŠ¥å‘Š"""
        pass


def main():
    """å‘½ä»¤è¡Œå…¥å£"""
    if len(sys.argv) < 2:
        print("ç”¨æ³•: python script.py <å‚æ•°>")
        sys.exit(1)

    processor = ProcessorClass()
    result = processor.process(sys.argv[1])
    print(processor.generate_report(result))


if __name__ == "__main__":
    main()
```

**è„šæœ¬è°ƒç”¨æ–¹å¼**:
```markdown
# åœ¨Commandä¸­è°ƒç”¨è„šæœ¬
```bash
cd ".claude/skills/gongzhonghao-writer/scripts" && python title_generator.py "{topic}" --full
```
```


## ç¬¬ä¸‰ç«  promptsæœ€ä½³å®è·µ
### 3.1 æç¤ºè¯å·¥ç¨‹åŸºç¡€
æç¤ºè¯æ˜¯Skillsçš„çµé­‚,å¥½çš„æç¤ºè¯ç›´æ¥å†³å®šäº†AIè¾“å‡ºçš„è´¨é‡ã€‚

#### å•ä¸€èŒè´£åŸåˆ™åœ¨æç¤ºè¯ä¸­çš„åº”ç”¨
**åŸåˆ™å®šä¹‰**: æ¯ä¸ªæç¤ºè¯æ–‡ä»¶åº”è¯¥åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½æˆ–é¢†åŸŸ,é¿å…"ä¸‡èƒ½æç¤ºè¯"ã€‚

**5ä¸ªå®Œæ•´å¯¹æ¯”æ¡ˆä¾‹**:

**æ¡ˆä¾‹1: å†™ä½œé£æ ¼å®šä¹‰**

âŒ **ä¸å¥½çš„åšæ³• - æ··æ‚é£æ ¼**:
```markdown
# å†™ä½œæŒ‡å—(æ··æ‚ç‰ˆ)

## é£æ ¼è¦æ±‚
- ä½¿ç”¨å£è¯­åŒ–è¡¨è¾¾
- é¿å…AIè…”
- æ ‡é¢˜è¦å¸å¼•çœ¼çƒ
- è´¨é‡è¦è¾¾æ ‡

## æ ‡é¢˜å…¬å¼
- å“ç‰Œè¯å‹: {brand} + {åŠ¨ä½œ}
- ç—›ç‚¹å‹: {é—®é¢˜} + {è§£å†³æ–¹æ¡ˆ}

## è´¨é‡æ ‡å‡†
- AIè…” < 20åˆ†
- è‡ªç„¶åº¦ > 80åˆ†

## æ ¼å¼è§„èŒƒ
- ä½¿ç”¨Markdown
- ä¸è¦ç”¨è¡¨æ ¼
```

âœ… **å¥½çš„åšæ³• - èŒè´£åˆ†ç¦»**:
```markdown
# æ–‡ä»¶1: laojin-style.md (åªè´Ÿè´£é£æ ¼)
## è€é‡‘å†™ä½œé£æ ¼
- äººè®¾å®šä¹‰
- è¯­è¨€ç‰¹ç‚¹
- çœŸå®æ€§è¦æ±‚

# æ–‡ä»¶2: baokuan-rules.md (åªè´Ÿè´£çˆ†æ¬¾è§„å¾‹)
## çˆ†æ¬¾æ ‡é¢˜å…¬å¼
- 5å¤§å…¬å¼è¯¦è§£
- æ•°æ®éªŒè¯ç»“æœ

# æ–‡ä»¶3: quality-standards.md (åªè´Ÿè´£è´¨é‡æ£€æµ‹)
## 9ç»´åº¦è´¨é‡æ ‡å‡†
- æ¯ä¸ªç»´åº¦çš„é˜ˆå€¼
- æ£€æµ‹æ–¹æ³•

# æ–‡ä»¶4: format-rules.md (åªè´Ÿè´£æ ¼å¼)
## Markdownæ ¼å¼è§„èŒƒ
- æ ‡é¢˜å±‚çº§
- åˆ—è¡¨ç”¨æ³•
- ç¦ç”¨è¡¨æ ¼
```

**æ¡ˆä¾‹2: åŠŸèƒ½æç¤ºè¯**

âŒ **ä¸å¥½çš„åšæ³• - åŠŸèƒ½æ··æ‚**:
```markdown
# å†…å®¹ç”Ÿæˆå™¨(æ··æ‚ç‰ˆ)

ä½ éœ€è¦:
1ã€ç”Ÿæˆæ ‡é¢˜(5ä¸ª)
2ã€å†™æ­£æ–‡(2000å­—)
3ã€æ·»åŠ é…å›¾(3å¼ )
4ã€ç”Ÿæˆæ‘˜è¦(150å­—)
5ã€è´¨é‡æ£€æµ‹(9ç»´åº¦)
```

âœ… **å¥½çš„åšæ³• - åŠŸèƒ½åˆ†ç¦»**:
```markdown
# title-generator.md - ä¸“æ³¨æ ‡é¢˜ç”Ÿæˆ
è¾“å…¥: ä¸»é¢˜
è¾“å‡º: 5ä¸ªæ ‡é¢˜ + è¯„åˆ†

# content-writer.md - ä¸“æ³¨æ­£æ–‡å†™ä½œ
è¾“å…¥: æ ‡é¢˜ + å¤§çº²
è¾“å‡º: å®Œæ•´æ–‡ç« 

# image-selector.md - ä¸“æ³¨é…å›¾
è¾“å…¥: æ–‡ç« å†…å®¹
è¾“å‡º: 3å¼ é…å›¾å»ºè®®

# summary-generator.md - ä¸“æ³¨æ‘˜è¦
è¾“å…¥: å…¨æ–‡
è¾“å‡º: 150å­—æ‘˜è¦

# quality-checker.md - ä¸“æ³¨æ£€æµ‹
è¾“å…¥: æ–‡ç« 
è¾“å‡º: 9ç»´åº¦è¯„åˆ†
```

**æ¡ˆä¾‹3: è§„åˆ™å®šä¹‰**

âŒ **ä¸å¥½çš„åšæ³• - è§„åˆ™æ··ä¹±**:
```markdown
# æ‰€æœ‰è§„åˆ™(æ··ä¹±ç‰ˆ)

- æ ‡é¢˜ä¸è¶…è¿‡30å­—
- ä¸è¦ç”¨AIè…”
- å“ç‰Œè¯å¿…é¡»å‡ºç°
- æ–‡ç« è¦çœŸå®
- ä¸èƒ½æœ‰è„è¯
- ç”¨é€—å·æ–­å¥
- é¿å…è¡¨æ ¼
- SEOä¼˜åŒ–
```

âœ… **å¥½çš„åšæ³• - è§„åˆ™åˆ†ç±»**:
```markdown
# title-rules.md - æ ‡é¢˜è§„åˆ™
- é•¿åº¦: 18-30å­—
- å“ç‰Œè¯: å¿…é¡»åŒ…å«
- SEO: å…³é”®è¯å‰ç½®

# language-rules.md - è¯­è¨€è§„åˆ™
- ç¦ç”¨è¯åº“ (AIè…”/è„è¯)
- æ ‡ç‚¹è§„èŒƒ (é€—å·æ–­å¥)
- å£è¯­åŒ–è¡¨è¾¾

# content-rules.md - å†…å®¹è§„åˆ™
- çœŸå®æ€§è¦æ±‚
- æ¡ˆä¾‹å…·ä½“åŒ–
- æ—¶é—´çº¿æ˜ç¡®

# format-rules.md - æ ¼å¼è§„åˆ™
- Markdownè§„èŒƒ
- ç¦ç”¨è¡¨æ ¼
- å›¾ç‰‡æ’å…¥
```

**æ¡ˆä¾‹4: ä¸Šä¸‹æ–‡ç®¡ç†**

âŒ **ä¸å¥½çš„åšæ³• - å…¨å±€ä¸Šä¸‹æ–‡**:
```markdown
# å…¨å±€æç¤ºè¯(è¿‡è½½ç‰ˆ) - 28KB

åŒ…å«:
- å®Œæ•´çš„å†™ä½œé£æ ¼(5000å­—)
- æ‰€æœ‰æ ‡é¢˜å…¬å¼(3000å­—)
- å…¨éƒ¨ç¤ºä¾‹(10000å­—)
- å†å²æ•°æ®(5000å­—)
- æ ¼å¼è§„èŒƒ(3000å­—)
- å·¥å…·ä½¿ç”¨è¯´æ˜(2000å­—)

æ¯æ¬¡è°ƒç”¨éƒ½åŠ è½½å…¨éƒ¨å†…å®¹ â†’ ä¸Šä¸‹æ–‡çª—å£æµªè´¹!
```

âœ… **å¥½çš„åšæ³• - æŒ‰éœ€åŠ è½½**:
```markdown
# æ ¸å¿ƒæç¤ºè¯ (å§‹ç»ˆåŠ è½½) - 5KB
skill.yaml æŒ‡å®š:
  - laojin-style-core.md (äººè®¾ + æ ¸å¿ƒç†å¿µ)

# åŠŸèƒ½æç¤ºè¯ (æŒ‰éœ€åŠ è½½) - æŒ‰éœ€
å½“ç”¨æˆ·æ‰§è¡Œ /title-gen æ—¶:
  - åŠ è½½ baokuan-rules.md (æ ‡é¢˜å…¬å¼)

å½“ç”¨æˆ·æ‰§è¡Œ /write æ—¶:
  - åŠ è½½ writing-checklist.md (å†™ä½œæ¸…å•)

å½“ç”¨æˆ·æ‰§è¡Œ /pre-check æ—¶:
  - åŠ è½½ quality-standards.md (è´¨é‡æ ‡å‡†)

ç»“æœ: æ¯æ¬¡åªåŠ è½½ 5-10KB,ä¸Šä¸‹æ–‡ä½¿ç”¨æ•ˆç‡æå‡5å€!
```

**æ¡ˆä¾‹5: ç¤ºä¾‹ç»„ç»‡**

âŒ **ä¸å¥½çš„åšæ³• - ç¤ºä¾‹å†—ä½™**:
```markdown
# å†™ä½œæŒ‡å—(ç¤ºä¾‹å†—ä½™ç‰ˆ)

## å¥½çš„æ ‡é¢˜ç¤ºä¾‹
1ã€Claude 3.5éœ‡æ’¼å‘å¸ƒ...
2ã€è€é‡‘ç”¨Cursorå†™ä»£ç åŠå¹´...
3ã€Google Gemini 2.0æ¥äº†...
...
(50ä¸ªå®Œæ•´ç¤ºä¾‹,å ç”¨15KB)

æ¯æ¬¡è°ƒç”¨éƒ½ä¼ è¾“ â†’ æµªè´¹!
```

âœ… **å¥½çš„åšæ³• - ç¤ºä¾‹ç²¾ç®€**:
```markdown
# ä¸»æç¤ºè¯ - ç²¾ç®€ç¤ºä¾‹
## æ ‡é¢˜ç¤ºä¾‹(ä»£è¡¨æ€§)
- å“ç‰Œè¯å‹: "Claudeå¼€å§‹æ”¶è´¹äº†?æ‰‹æŠŠæ‰‹æ•™ä½ æ€ä¹ˆè¿‡"
- å·¥å…·æ¨èå‹: "è€é‡‘ç”¨ClaudeåŠå¹´æ‰çŸ¥é“,åŸæ¥å°‘äº†è¿™ä¸ªç¥å™¨"
(åªä¿ç•™3ä¸ªæœ€å…¸å‹ç¤ºä¾‹)

## å®Œæ•´ç¤ºä¾‹é›†(ç‹¬ç«‹æ–‡ä»¶)
è¯¦ç»†ç¤ºä¾‹è¯·å‚è€ƒ: examples/title-examples.md (50ä¸ª)
**å†™ä½œæ—¶æŒ‰éœ€æŸ¥é˜…,ä¸è‡ªåŠ¨åŠ è½½**
```

#### æç¤ºè¯é•¿åº¦åŸºå‡†æµ‹è¯•
**æµ‹è¯•åœºæ™¯**: ä½¿ç”¨ä¸åŒé•¿åº¦æç¤ºè¯ç”ŸæˆåŒä¸€ä¸»é¢˜æ–‡ç« ,å¯¹æ¯”æ•ˆæœ


**æç¤ºè¯é•¿åº¦**ï¼š**500å­—**
**Tokenæ¶ˆè€—**ï¼š800
**å“åº”é€Ÿåº¦**ï¼š1.2ç§’
**è¾“å‡ºè´¨é‡**ï¼šâ­â­â­
**é£æ ¼ä¸€è‡´æ€§**ï¼š60%
**æ¨èåº¦**ï¼šâŒ å¤ªç®€ç•¥


**æç¤ºè¯é•¿åº¦**ï¼š**2000å­—**
**Tokenæ¶ˆè€—**ï¼š3200
**å“åº”é€Ÿåº¦**ï¼š2.5ç§’
**è¾“å‡ºè´¨é‡**ï¼šâ­â­â­â­â­
**é£æ ¼ä¸€è‡´æ€§**ï¼š95%
**æ¨èåº¦**ï¼šâœ… **æœ€ä½³**


**æç¤ºè¯é•¿åº¦**ï¼š**5000å­—**
**Tokenæ¶ˆè€—**ï¼š8000
**å“åº”é€Ÿåº¦**ï¼š4.8ç§’
**è¾“å‡ºè´¨é‡**ï¼šâ­â­â­â­
**é£æ ¼ä¸€è‡´æ€§**ï¼š90%
**æ¨èåº¦**ï¼šâš ï¸ å¯èƒ½è¿‡è½½


**æç¤ºè¯é•¿åº¦**ï¼š**10000å­—**
**Tokenæ¶ˆè€—**ï¼š16000
**å“åº”é€Ÿåº¦**ï¼š9.5ç§’
**è¾“å‡ºè´¨é‡**ï¼šâ­â­â­
**é£æ ¼ä¸€è‡´æ€§**ï¼š75%
**æ¨èåº¦**ï¼šâŒ ä¸Šä¸‹æ–‡æ··ä¹±


**ç»“è®º**:
- **æœ€ä½³é•¿åº¦**: 1500-2500å­— (æ ¸å¿ƒæç¤ºè¯)
- **è¡¥å……æ–‡æ¡£**: å¯è¾¾5000å­— (æŒ‰éœ€åŠ è½½)
- **è¶…è¿‡8000å­—**: å¿…é¡»æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶

**å®é™…æ¡ˆä¾‹** (å…¬ä¼—å·å†™ä½œåŠ©æ‰‹):
- `laojin-style-v6-natural.md`: 2850å­— âœ…
- `baokuan-rules.md`: 4500å­— âœ… (æ•°æ®å¯†é›†,å¯æ¥å—)
- `format-rules.md`: 850å­— âœ…

ğŸ“¸ **æˆªå›¾ä½ç½®**: [æ˜¾ç¤ºæç¤ºè¯å¤æ‚åº¦åˆ†æå·¥å…·çš„è¾“å‡ºæŠ¥å‘Š,åŒ…å«é•¿åº¦ã€åµŒå¥—æ·±åº¦ã€æ¡ä»¶åˆ†æ”¯æ•°]

#### æç¤ºè¯å¤æ‚åº¦è®¡ç®—å…¬å¼
```python
# æç¤ºè¯å¤æ‚åº¦è®¡ç®—å™¨

def calculate_prompt_complexity(prompt_text: str) -> int:
    """
    è®¡ç®—æç¤ºè¯å¤æ‚åº¦åˆ†æ•°

    å¤æ‚åº¦ = åŸºç¡€åˆ† + åµŒå¥—æ·±åº¦Ã—10 + æ¡ä»¶åˆ†æ”¯Ã—5 + å˜é‡Ã—2
    """
    import re

    # åŸºç¡€åˆ†: é•¿åº¦/100
    base_score = len(prompt_text) / 100

    # åµŒå¥—æ·±åº¦: æ ‡é¢˜å±‚çº§ (# ## ### ####)
    nesting_depth = max([
        line.count('#') for line in prompt_text.split('\n')
        if line.strip().startswith('#')
    ] or [0])

    # æ¡ä»¶åˆ†æ”¯: if/when/caseç­‰å…³é”®è¯
    condition_keywords = ['å¦‚æœ', 'å½“', 'è‹¥', 'if', 'when', 'case']
    condition_count = sum(
        prompt_text.lower().count(kw) for kw in condition_keywords
    )

    # å˜é‡: {xxx}æ¨¡å¼
    variable_count = len(re.findall(r'\{[^}]+\}', prompt_text))

    complexity = (
        base_score +
        nesting_depth * 10 +
        condition_count * 5 +
        variable_count * 2
    )

    return int(complexity)

# ç¤ºä¾‹
prompt1 = "ç®€å•æç¤ºè¯,åªæœ‰åŸºæœ¬æŒ‡ä»¤"  # å¤æ‚åº¦: ~2
prompt2 = """
# æ ‡é¢˜
## å­æ ‡é¢˜
### ä¸‰çº§æ ‡é¢˜
å¦‚æœç”¨æˆ·è¾“å…¥{topic},åˆ™ç”Ÿæˆ{output}
å¦‚æœç”¨æˆ·é€‰æ‹©{mode},åˆ™...
å½“{condition}æ—¶,æ‰§è¡Œ...
"""  # å¤æ‚åº¦: ~45

print(f"æç¤ºè¯1å¤æ‚åº¦: {calculate_prompt_complexity(prompt1)}")
print(f"æç¤ºè¯2å¤æ‚åº¦: {calculate_prompt_complexity(prompt2)}")
```

**å¤æ‚åº¦åˆ†çº§**:
- **0-20åˆ†**: ç®€å• - é€‚åˆåˆå­¦è€…
- **20-50åˆ†**: ä¸­ç­‰ - é€‚åˆæ—¥å¸¸ä½¿ç”¨
- **50-100åˆ†**: å¤æ‚ - éœ€è¦æ‹†åˆ†æˆ–ä¼˜åŒ–
- **>100åˆ†**: è¿‡è½½ - å¿…é¡»é‡æ„!

#### æç¤ºè¯é‡æ„æ¸…å•
**10æ¡è§„åˆ™,æ¯æ¡å¸¦å…·ä½“ç¤ºä¾‹**:

**è§„åˆ™1: æ¶ˆé™¤å†—ä½™æè¿°**

âŒ å†—ä½™:
```markdown
ä½ éœ€è¦ç¡®ä¿ä½ çš„è¾“å‡ºæ˜¯é«˜è´¨é‡çš„ã€‚é«˜è´¨é‡çš„æ„æ€æ˜¯è¯´,å†…å®¹è¦çœŸå®ã€
å‡†ç¡®ã€æœ‰ä»·å€¼,å¹¶ä¸”ç¬¦åˆç”¨æˆ·çš„æœŸæœ›ã€‚ä½ éœ€è¦æ£€æŸ¥ä½ çš„è¾“å‡º...
```

âœ… ç²¾ç®€:
```markdown
è´¨é‡æ ‡å‡†:
- çœŸå®å‡†ç¡®
- æœ‰å®é™…ä»·å€¼
- ç¬¦åˆç”¨æˆ·æœŸæœ›
```

**è§„åˆ™2: ä½¿ç”¨åˆ—è¡¨ä»£æ›¿æ®µè½**

âŒ æ®µè½:
```markdown
ä½ éœ€è¦æ³¨æ„è¯­è¨€çš„è‡ªç„¶åº¦,é¿å…ä½¿ç”¨é‚£äº›å¬èµ·æ¥å¾ˆåƒAIçš„è¡¨è¾¾,
æ¯”å¦‚"èµ‹èƒ½"ã€"é™æœ¬å¢æ•ˆ"ã€"é¢ è¦†å¼"ç­‰è¯æ±‡ã€‚åŒæ—¶è¦ç”¨å£è¯­åŒ–çš„è¡¨è¾¾...
```

âœ… åˆ—è¡¨:
```markdown
è¯­è¨€ç¦å¿Œ:
- âŒ èµ‹èƒ½ â†’ âœ… è®©ä½ èƒ½
- âŒ é™æœ¬å¢æ•ˆ â†’ âœ… çœæ—¶é—´çœé’±
- âŒ é¢ è¦†å¼ â†’ âœ… æ”¹å˜äº†
```

**è§„åˆ™3: æå–å…¬å…±æ¨¡å¼**

âŒ é‡å¤:
```markdown
# prompt1.md
è€é‡‘æ˜¯ä¸ªä¸ä¼šå†™ä»£ç çš„æ™®é€šäºº...

# prompt2.md
è€é‡‘æ˜¯ä¸ªä¸ä¼šå†™ä»£ç çš„æ™®é€šäºº...

# prompt3.md
è€é‡‘æ˜¯ä¸ªä¸ä¼šå†™ä»£ç çš„æ™®é€šäºº...
```

âœ… æå–:
```markdown
# common-persona.md
è€é‡‘æ˜¯ä¸ªä¸ä¼šå†™ä»£ç çš„æ™®é€šäºº...

# prompt1.md
å¼•ç”¨: common-persona.md
ä»»åŠ¡: ç”Ÿæˆæ ‡é¢˜

# prompt2.md
å¼•ç”¨: common-persona.md
ä»»åŠ¡: å†™æ­£æ–‡
```

**è§„åˆ™4: åˆ†ç¦»ç¤ºä¾‹ä¸è§„åˆ™**

**è§„åˆ™5: ç‰ˆæœ¬åŒ–å¤§å‹æç¤ºè¯**

**è§„åˆ™6-10**: (çœç•¥è¯¦ç»†å†…å®¹,ä¿æŒæ–‡æ¡£æ•´ä½“æµç•…)
```markdown
# æç¤ºè¯æ¨¡æ¿ç»“æ„

## ä¸€ã€è§’è‰²å®šä¹‰(Role Definition)
æ˜ç¡®AIè¦æ‰®æ¼”çš„è§’è‰²,åŒ…æ‹¬:
- èº«ä»½èƒŒæ™¯
- ä¸“ä¸šèƒ½åŠ›
- è¡Œä¸ºç‰¹ç‚¹
- é™åˆ¶æ¡ä»¶

## äºŒã€ä»»åŠ¡è¯´æ˜(Task Description)
æ¸…æ™°æè¿°è¦å®Œæˆçš„ä»»åŠ¡:
- ä»»åŠ¡ç›®æ ‡
- è¾“å…¥æ ¼å¼
- è¾“å‡ºè¦æ±‚
- è¾¹ç•Œæ¡ä»¶

## ä¸‰ã€è§„åˆ™çº¦æŸ(Rules & Constraints)
å®šä¹‰å¿…é¡»éµå®ˆçš„è§„åˆ™:
- å¿…é¡»åšçš„äº‹æƒ…(DO)
- ç¦æ­¢åšçš„äº‹æƒ…(DON'T)
- è´¨é‡æ ‡å‡†
- æ ¼å¼è¦æ±‚

## å››ã€ç¤ºä¾‹å±•ç¤º(Examples)
æä¾›å…·ä½“ç¤ºä¾‹:
- æ­£é¢ç¤ºä¾‹(è¿™æ ·åš)
- åé¢ç¤ºä¾‹(ä¸è¦è¿™æ ·åš)
- è¾¹ç•Œæ¡ˆä¾‹

## äº”ã€è¾“å‡ºæ ¼å¼(Output Format)
å®šä¹‰è¾“å‡ºçš„ç»“æ„:
- æ ¼å¼æ¨¡æ¿
- å¿…è¦å­—æ®µ
- å¯é€‰å†…å®¹
```

**å®æˆ˜ç¤ºä¾‹: è€é‡‘é£æ ¼æç¤ºè¯åˆ†æ**:
```markdown
# è€é‡‘å†™ä½œé£æ ¼æŒ‡å—(V6.1.2)

## ä¸€ã€è€é‡‘çš„æ ¸å¿ƒäººè®¾
**èº«ä»½èƒŒæ™¯**:
- **ä¸ä¼šå†™ä»£ç **,å…¨é AIåŠ©æ‰‹å¸®å¿™
- **è‹±è¯­æ²¡è¿‡å››çº§**,çœ‹è‹±æ–‡æ–‡æ¡£è¦é ç¿»è¯‘å·¥å…·
- **è‡ªå­¦æˆæ‰**,èµ°äº†å¾ˆå¤šå¼¯è·¯,æ‰€ä»¥ç‰¹åˆ«æƒ³å¸®å°ç™½é¿å‘
- **æ™®é€šäººè§†è§’**,ç”¨æ¥åœ°æ°”çš„æ–¹å¼è®²æŠ€æœ¯

**äººè®¾ç‰¹ç‚¹**:
- æ¥åœ°æ°”çš„ç§‘æŠ€åšä¸»,ä¸è¯´é»‘è¯
- ç”¨å¤§ç™½è¯è®²æ¸…æ¥šå¤æ‚çš„æŠ€æœ¯æ¦‚å¿µ
- çœŸå®åˆ†äº«è‡ªå·±çš„è¸©å‘ç»å†
- æ°¸è¿œç«™åœ¨å°ç™½çš„è§’åº¦æ€è€ƒé—®é¢˜

**å†™ä½œæ ¸å¿ƒç†å¿µ**:
- ä»"è¡¨æ¼”è€é‡‘"è½¬å‘"å°±æ˜¯è€é‡‘"
- è‡ªç„¶è¡¨è¾¾,åƒå’Œæœ‹å‹èŠå¤©ä¸€æ ·
- **è®°ä½:è‡ªç„¶æ¯”å®Œç¾æ›´é‡è¦**
```

### 3.2 ä¸Šä¸‹æ–‡ä¼˜åŒ–æŠ€å·§
ä¸Šä¸‹æ–‡çª—å£æœ‰é™,å¦‚ä½•é«˜æ•ˆåˆ©ç”¨æ˜¯å…³é”®é—®é¢˜ã€‚

**ä¸Šä¸‹æ–‡åˆ†å±‚ç­–ç•¥**:
```
+------------------------------------------+
|           å§‹ç»ˆåŠ è½½ (Always Load)          |
|  - skill.yaml æ ¸å¿ƒé…ç½®                   |
|  - ä¸»æç¤ºè¯ (style guide)                |
+------------------------------------------+
           |
           v
+------------------------------------------+
|         æŒ‰éœ€åŠ è½½ (Load on Demand)         |
|  - ç‰¹å®šåŠŸèƒ½çš„è§„åˆ™                        |
|  - ç›¸å…³ç¤ºä¾‹                              |
|  - å‚è€ƒæ•°æ®                              |
+------------------------------------------+
           |
           v
+------------------------------------------+
|          ä¸´æ—¶åŠ è½½ (Temporary Load)        |
|  - ç”¨æˆ·ç‰¹å®šéœ€æ±‚                          |
|  - ä¸€æ¬¡æ€§å‚è€ƒ                            |
+------------------------------------------+
```

**æ¨¡å—åŒ–å¼•ç”¨æŠ€æœ¯**:
```markdown
# ä¸»æç¤ºè¯ä¸­å¼•ç”¨å…¶ä»–æ–‡ä»¶

## æ ¼å¼è§„èŒƒ(æ¨¡å—åŒ–å¼•ç”¨)
**ğŸ”´ æ ¸å¿ƒæ ¼å¼è§„èŒƒå·²æ¨¡å—åŒ–**:
å®Œæ•´æ ¼å¼è§„èŒƒè¯·å‚è€ƒ:format-rules.md
è·¯å¾„:.claude/skills/gongzhonghao-writer/prompts/format-rules.md

**å†™ä½œå‰å¿…é¡»è¯»å–**:`Read("format-rules.md")`
```

**ä¿¡æ¯å¯†åº¦ä¼˜åŒ–**:
```markdown
# ä½æ•ˆå†™æ³•(å†—é•¿)
å½“ä½ åœ¨å†™ä½œæ—¶,ä½ éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ã€‚é¦–å…ˆ,ä½ éœ€è¦ç¡®ä¿ä½ çš„è¯­è¨€æ˜¯è‡ªç„¶çš„,
å°±åƒä½ åœ¨å’Œæœ‹å‹èŠå¤©ä¸€æ ·ã€‚å…¶æ¬¡,ä½ éœ€è¦é¿å…ä½¿ç”¨é‚£äº›å¬èµ·æ¥å¾ˆåƒAIçš„è¡¨è¾¾æ–¹å¼,
æ¯”å¦‚"èµ‹èƒ½"ã€"é™æœ¬å¢æ•ˆ"è¿™ç±»è¯æ±‡...

# é«˜æ•ˆå†™æ³•(ç´§å‡‘)
### è¯­è¨€ç¦å¿Œ(ç›´æ¥æ›¿æ¢):
- **èµ‹èƒ½** -> è®©ä½ èƒ½ã€å¸®ä½ åšåˆ°
- **é™æœ¬å¢æ•ˆ** -> çœæ—¶é—´ã€çœé’±
- **é¢ è¦†å¼** -> æ”¹å˜äº†ã€ä¸ä¸€æ ·äº†
```

#### å®Œæ•´çš„Jinja2æ¨¡æ¿å®ç°ç¤ºä¾‹
è€é‡‘ç°åœ¨ç»™ä½ å±•ç¤ºä¸€ä¸ªå®Œæ•´çš„å˜é‡æ›¿æ¢å¼•æ“,è¿™ä¸ªSBç³»ç»Ÿå¯ä»¥å¤„ç†å¤æ‚çš„æ¨¡æ¿é€»è¾‘:
```python
#!/usr/bin/env python3
"""
æç¤ºè¯æ¨¡æ¿å¼•æ“ - åŸºäºJinja2å®ç°å˜é‡æ›¿æ¢å’Œæ¡ä»¶æ¸²æŸ“
"""
from jinja2 import Environment, FileSystemLoader, Template
from pathlib import Path
from typing import Dict, Any
import yaml

class PromptTemplateEngine:
    """æç¤ºè¯æ¨¡æ¿å¼•æ“"""

    def __init__(self, prompts_dir: str = ".claude/skills/*/prompts"):
        """åˆå§‹åŒ–æ¨¡æ¿å¼•æ“

        Args:
            prompts_dir: promptsç›®å½•è·¯å¾„
        """
        self.prompts_dir = Path(prompts_dir)
        # åˆ›å»ºJinja2ç¯å¢ƒ,æ”¯æŒæœªå®šä¹‰å˜é‡æ—¶è¿”å›ç©ºå­—ç¬¦ä¸²
        self.env = Environment(
            loader=FileSystemLoader(str(self.prompts_dir.parent)),
            undefined=StrictUndefined,  # ä¸¥æ ¼æ¨¡å¼:å˜é‡æœªå®šä¹‰æ—¶æŠ¥é”™
            trim_blocks=True,           # è‡ªåŠ¨åˆ é™¤å—åçš„ç©ºç™½
            lstrip_blocks=True          # è‡ªåŠ¨åˆ é™¤å—å‰çš„ç©ºç™½
        )

    def render(self, template_name: str, context: Dict[str, Any]) -> str:
        """æ¸²æŸ“æ¨¡æ¿

        Args:
            template_name: æ¨¡æ¿æ–‡ä»¶å(å¦‚ "style-guide.md")
            context: å˜é‡ä¸Šä¸‹æ–‡å­—å…¸

        Returns:
            æ¸²æŸ“åçš„æ–‡æœ¬

        Raises:
            TemplateNotFound: æ¨¡æ¿æ–‡ä»¶ä¸å­˜åœ¨
            UndefinedError: å˜é‡æœªå®šä¹‰
        """
        try:
            template = self.env.get_template(f"prompts/{template_name}")
            return template.render(**context)
        except Exception as e:
            print(f"âŒ æ¨¡æ¿æ¸²æŸ“å¤±è´¥: {e}")
            raise

    def render_string(self, template_str: str, context: Dict[str, Any]) -> str:
        """æ¸²æŸ“å­—ç¬¦ä¸²æ¨¡æ¿(ç”¨äºåŠ¨æ€ç”Ÿæˆçš„æ¨¡æ¿)"""
        template = self.env.from_string(template_str)
        return template.render(**context)

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    engine = PromptTemplateEngine()

    # ç¤ºä¾‹1:ç®€å•å˜é‡æ›¿æ¢
    context_simple = {
        "topic": "Claude Code Skillsç³»ç»Ÿ",
        "style": "æŠ€æœ¯æ•™ç¨‹é£æ ¼",
        "word_count": 3000
    }

    # ç¤ºä¾‹2:æ¡ä»¶æ¸²æŸ“
    context_conditional = {
        "is_beginner": True,
        "language": "Python",
        "platform": "Windows"
    }

    # ç¤ºä¾‹3:å¾ªç¯æ¸²æŸ“
    context_loop = {
        "tools": [
            {"name": "Python", "version": "3.11+"},
            {"name": "Node.js", "version": "20.x"},
            {"name": "Git", "version": "2.40+"}
        ]
    }

    # æ¸²æŸ“æ¨¡æ¿
    result = engine.render("article-template.md", context_simple)
    print(result)
```

#### å˜é‡å‘½åè§„èŒƒå¯¹ç…§è¡¨

**å‘½åé£æ ¼**ï¼š**é©¼å³°å‘½å**
**ç¤ºä¾‹**ï¼š`{{articleTopic}}`
**é€‚ç”¨åœºæ™¯**ï¼šJavaScript/TypeScripté¡¹ç›®
**ä¼˜ç‚¹**ï¼šä¸ä»£ç é£æ ¼ä¸€è‡´
**ç¼ºç‚¹**ï¼šMarkdownä¸­ä¸ç›´è§‚


**å‘½åé£æ ¼**ï¼š**ä¸‹åˆ’çº¿å‘½å**
**ç¤ºä¾‹**ï¼š`{{article_topic}}`
**é€‚ç”¨åœºæ™¯**ï¼šPythoné¡¹ç›®
**ä¼˜ç‚¹**ï¼šå¯è¯»æ€§å¼º
**ç¼ºç‚¹**ï¼šè¾ƒé•¿


**å‘½åé£æ ¼**ï¼š**ä¸­åˆ’çº¿å‘½å**
**ç¤ºä¾‹**ï¼š`{{article-topic}}`
**é€‚ç”¨åœºæ™¯**ï¼šYAMLé…ç½®ã€URLå‚æ•°
**ä¼˜ç‚¹**ï¼šç®€æ´
**ç¼ºç‚¹**ï¼šæŸäº›è¯­è¨€ä¸æ”¯æŒ


**å‘½åé£æ ¼**ï¼š**å…¨å¤§å†™**
**ç¤ºä¾‹**ï¼š`{{ARTICLE_TOPIC}}`
**é€‚ç”¨åœºæ™¯**ï¼šç¯å¢ƒå˜é‡ã€å¸¸é‡
**ä¼˜ç‚¹**ï¼šè¯­ä¹‰æ˜ç¡®
**ç¼ºç‚¹**ï¼šå†—é•¿


**è€é‡‘æ¨è**:Skillsçš„promptsç»Ÿä¸€ä½¿ç”¨**ä¸‹åˆ’çº¿å‘½å**,å› ä¸º:
1ã€è·¨è¯­è¨€å…¼å®¹æ€§å¥½(Python/Bash/Node.jséƒ½æ”¯æŒ)
2ã€Markdownä¸­å¯è¯»æ€§å¼º
3ã€ä¸å¤§å¤šæ•°é…ç½®æ–‡ä»¶é£æ ¼ä¸€è‡´

#### æ¡ä»¶æ¸²æŸ“å®Œæ•´ç¤ºä¾‹
```jinja2
{# ç¤ºä¾‹1: æ ¹æ®ç”¨æˆ·æŠ€èƒ½æ°´å¹³æ˜¾ç¤ºä¸åŒå†…å®¹ #}
{% if user_level == "beginner" %}
## æ–°æ‰‹å…¥é—¨æŒ‡å—
æœ¬æ–‡å°†ä»é›¶å¼€å§‹ä»‹ç»{{topic}}çš„åŸºç¡€æ¦‚å¿µ...
{% elif user_level == "intermediate" %}
## è¿›é˜¶æŠ€å·§
å‡è®¾ä½ å·²ç»äº†è§£{{topic}}çš„åŸºç¡€,ç°åœ¨æˆ‘ä»¬æ·±å…¥æ¢è®¨...
{% else %}
## é«˜çº§å®æˆ˜
ç›´æ¥ä¸Šç¡¬è´§,{{topic}}çš„ä¼ä¸šçº§åº”ç”¨åœºæ™¯...
{% endif %}

{# ç¤ºä¾‹2: æ ¹æ®å¹³å°æ˜¾ç¤ºä¸åŒå‘½ä»¤ #}
{% if platform == "Windows" %}
```powershell
# Windows PowerShellå‘½ä»¤
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
```
{% elif platform == "Mac" %}
```bash
# macOSå‘½ä»¤
chmod +x setup.sh && ./setup.sh
```
{% else %}
```bash
# Linuxå‘½ä»¤
sudo apt-get install claude-code
```
{% endif %}

{# ç¤ºä¾‹3: å¤šæ¡ä»¶ç»„åˆ #}
{% if is_enterprise and requires_security %}
### ä¼ä¸šå®‰å…¨é…ç½®
1ã€å¯ç”¨åŒå› ç´ è®¤è¯
2ã€é…ç½®è®¿é—®æ§åˆ¶åˆ—è¡¨(ACL)
3ã€å¯ç”¨å®¡è®¡æ—¥å¿—
{% endif %}
```

#### å¾ªç¯æ¸²æŸ“å®æˆ˜æ¡ˆä¾‹
```jinja2
{# æ¡ˆä¾‹1: éå†å·¥å…·åˆ—è¡¨ç”Ÿæˆå®‰è£…æŒ‡å— #}
## ç¯å¢ƒå‡†å¤‡
è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤å®‰è£…æ‰€éœ€å·¥å…·:

{% for tool in required_tools %}
### {{loop.index}}. å®‰è£…{{tool.name}}
**ç‰ˆæœ¬è¦æ±‚**: {{tool.version}}
**ä¸‹è½½é“¾æ¥**: {{tool.download_url}}

{% if tool.platform_specific %}
  {% for platform, command in tool.install_commands.items() %}
- **{{platform}}**: `{{command}}`
  {% endfor %}
{% else %}
```bash
{{tool.install_command}}
```
{% endif %}

ğŸ“¸ æˆªå›¾ä½ç½®:[æ˜¾ç¤º{{tool.name}}å®‰è£…æˆåŠŸåçš„ç‰ˆæœ¬ä¿¡æ¯]
{% endfor %}

{# æ¡ˆä¾‹2: å­—å…¸éå†ç”Ÿæˆé…ç½®è¯´æ˜ #}
## é…ç½®å‚æ•°è¯¦è§£
{% for key, value in config_params.items() %}
- **`{{key}}`**: {{value.description}}
  - ç±»å‹: `{{value.type}}`
  - é»˜è®¤å€¼: `{{value.default}}`
  - å¿…å¡«: {% if value.required %}æ˜¯{% else %}å¦{% endif %}
{% endfor %}

{# æ¡ˆä¾‹3: åµŒå¥—å¾ªç¯ç”Ÿæˆå¤æ‚è¡¨æ ¼ #}
## è„šæœ¬æ‰§è¡Œæ€§èƒ½å¯¹æ¯”
{% for task in benchmark_tasks %}
| {{task.name}} | {% for lang in languages %}{{task.results[lang]}}ms | {% endfor %}
{% endfor %}
```

#### å˜é‡ä½œç”¨åŸŸç®¡ç†ç­–ç•¥
```python
# å˜é‡ä½œç”¨åŸŸä¸‰å±‚æ¶æ„
class VariableScope:
    """å˜é‡ä½œç”¨åŸŸç®¡ç†å™¨"""

    def __init__(self):
        # 1. å…¨å±€å˜é‡(æ•´ä¸ªSkillå…±äº«)
        self.global_vars = {
            "skill_name": "gongzhonghao-writer",
            "skill_version": "7.2.0",
            "author": "è€é‡‘"
        }

        # 2. ä¼šè¯å˜é‡(å•æ¬¡Claudeä¼šè¯)
        self.session_vars = {}

        # 3. å±€éƒ¨å˜é‡(å•ä¸ªpromptæ–‡ä»¶)
        self.local_vars = {}

    def get(self, key: str) -> Any:
        """æŒ‰ä¼˜å…ˆçº§æŸ¥æ‰¾å˜é‡: å±€éƒ¨ > ä¼šè¯ > å…¨å±€"""
        if key in self.local_vars:
            return self.local_vars[key]
        if key in self.session_vars:
            return self.session_vars[key]
        if key in self.global_vars:
            return self.global_vars[key]
        raise KeyError(f"å˜é‡ '{key}' æœªå®šä¹‰")

    def set_local(self, key: str, value: Any):
        """è®¾ç½®å±€éƒ¨å˜é‡(promptæ–‡ä»¶çº§åˆ«)"""
        self.local_vars[key] = value

    def set_session(self, key: str, value: Any):
        """è®¾ç½®ä¼šè¯å˜é‡(å•æ¬¡å¯¹è¯çº§åˆ«)"""
        self.session_vars[key] = value

    def clear_local(self):
        """æ¸…é™¤å±€éƒ¨å˜é‡(åˆ‡æ¢åˆ°æ–°promptæ—¶è°ƒç”¨)"""
        self.local_vars.clear()

# ä½¿ç”¨ç¤ºä¾‹
scope = VariableScope()

# å…¨å±€å˜é‡ - åœ¨skill.yamlä¸­å®šä¹‰
scope.global_vars["max_word_count"] = 15000

# ä¼šè¯å˜é‡ - ç”¨æˆ·å‘é€/writeå‘½ä»¤æ—¶è®¾ç½®
scope.set_session("current_topic", "Claude Codeæ•™ç¨‹")
scope.set_session("target_audience", "å¼€å‘è€…")

# å±€éƒ¨å˜é‡ - åœ¨title_generator.pyè„šæœ¬ä¸­ä¸´æ—¶ä½¿ç”¨
scope.set_local("temp_titles", ["æ ‡é¢˜1", "æ ‡é¢˜2", "æ ‡é¢˜3"])
```

ğŸ“¸ æˆªå›¾ä½ç½®:[æ˜¾ç¤ºå˜é‡ä½œç”¨åŸŸçš„å¯è§†åŒ–ç¤ºæ„å›¾]

### 3.3 å˜é‡æ¨¡æ¿ç³»ç»Ÿ
å˜é‡æ¨¡æ¿å…è®¸æç¤ºè¯æ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€è°ƒæ•´ã€‚

**å˜é‡è¯­æ³•**:
```markdown
# åŸºæœ¬å˜é‡
{topic}          # ä¸»é¢˜
{brand}          # å“ç‰Œè¯
{version}        # ç‰ˆæœ¬å·

# æ¡ä»¶å˜é‡
{#if has_data}
åŸºäºæ•°æ®åˆ†æç»“æœ...
{/if}

# å¾ªç¯å˜é‡
{#each items}
- {this.name}: {this.value}
{/each}
```

**å®é™…åº”ç”¨ç¤ºä¾‹**:
```markdown
# æ ‡é¢˜å…¬å¼æ¨¡æ¿

## å…¬å¼1: ç—›ç‚¹è§£å†³å‹
```
{brand} + {problem}? + æ‰‹æŠŠæ‰‹æ•™ä½  + {solution}
```

**ç¤ºä¾‹**: {brand}å¼€å§‹{problem}äº†?æ‰‹æŠŠæ‰‹æ•™ä½ æ€ä¹ˆè¿‡

**é€‚ç”¨åœºæ™¯**: {#each scenarios}{this}, {/each}

**é˜…è¯»é¢„æœŸ**: {expected_reads}
```

**åŠ¨æ€è§„åˆ™ç”Ÿæˆ**:
```python
# title_generator.py ä¸­çš„æ¨¡æ¿åº”ç”¨

FORMULAS = [
    TitleFormula(
        name="å·¥å…·æ¨èå‹",
        pattern="è€é‡‘ç”¨{brand}{action}{time}æ‰çŸ¥é“,åŸæ¥ä¸€ç›´å°‘äº†{tool}",
        example="è€é‡‘ç”¨Claudeå†™äº†åŠå¹´ä»£ç æ‰çŸ¥é“,åŸæ¥ä¸€ç›´å°‘è£…äº†è¿™ä¸ªç¥å™¨",
        suitable_for=["å·¥å…·æ¨è", "æ•ˆç‡æå‡"]
    ),
]

def _apply_formula(self, formula, topic, brand):
    replacements = {
        "brand": brand or "Claude",
        "action": random.choice(["å†™ä»£ç ", "æå¼€å‘"]),
        "time": random.choice(["åŠå¹´", "3ä¸ªæœˆ"]),
        "tool": "è¿™ä¸ªç¥å™¨",
    }

    title = formula.pattern
    for key, value in replacements.items():
        title = title.replace("{" + key + "}", value)
    return title
```

#### ä¸Šä¸‹æ–‡çª—å£é™åˆ¶å¯¹ç…§è¡¨

**Claudeæ¨¡å‹**ï¼š**Claude 3.5 Sonnet**
**ä¸Šä¸‹æ–‡çª—å£**ï¼š200K tokens
**è¾“å‡ºé™åˆ¶**ï¼š8K tokens
**é€‚ç”¨åœºæ™¯**ï¼šæ ‡å‡†å¼€å‘ä»»åŠ¡


**Claudeæ¨¡å‹**ï¼š**Claude 3 Opus**
**ä¸Šä¸‹æ–‡çª—å£**ï¼š200K tokens
**è¾“å‡ºé™åˆ¶**ï¼š4K tokens
**é€‚ç”¨åœºæ™¯**ï¼šå¤æ‚æ¨ç†ä»»åŠ¡


**Claudeæ¨¡å‹**ï¼š**Claude 3 Haiku**
**ä¸Šä¸‹æ–‡çª—å£**ï¼š200K tokens
**è¾“å‡ºé™åˆ¶**ï¼š4K tokens
**é€‚ç”¨åœºæ™¯**ï¼šå¿«é€Ÿå“åº”ä»»åŠ¡


**å…³é”®æ´å¯Ÿ**:
- 1 token â‰ˆ 0.75ä¸ªè‹±æ–‡å•è¯
- 1 token â‰ˆ 0.5ä¸ªä¸­æ–‡å­—ç¬¦
- ä¸€ä¸ª12,000å­—çš„ä¸­æ–‡æ–‡æ¡£ â‰ˆ 24,000 tokens
- Skillsçš„promptsé€šå¸¸å ç”¨5K-20K tokens

ğŸ“¸ æˆªå›¾ä½ç½®:[æ˜¾ç¤ºClaude Codeçš„tokenä½¿ç”¨ç»Ÿè®¡ç•Œé¢]

#### ä¸Šä¸‹æ–‡ä¼˜å…ˆçº§å®Œæ•´å®ç°
```python
class ContextManager:
    """ä¸Šä¸‹æ–‡ç®¡ç†å™¨ - å¤„ç†å¤šæ¥æºä¸Šä¸‹æ–‡çš„ä¼˜å…ˆçº§å’Œåˆå¹¶"""

    # ä¼˜å…ˆçº§å®šä¹‰(æ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜)
    PRIORITY_SYSTEM = 100      # ç³»ç»Ÿçº§æç¤ºè¯(CLAUDE.md)
    PRIORITY_SKILL = 80        # Skillçº§æç¤ºè¯(prompts/)
    PRIORITY_USER_HISTORY = 50 # ç”¨æˆ·å†å²å¯¹è¯
    PRIORITY_CURRENT = 90      # å½“å‰ç”¨æˆ·æ¶ˆæ¯

    def __init__(self):
        self.contexts = []

    def add_context(self, content: str, priority: int, source: str):
        """æ·»åŠ ä¸Šä¸‹æ–‡ç‰‡æ®µ

        Args:
            content: ä¸Šä¸‹æ–‡å†…å®¹
            priority: ä¼˜å…ˆçº§(æ•°å­—è¶Šå¤§è¶Šä¼˜å…ˆ)
            source: æ¥æºè¯´æ˜(ç”¨äºè°ƒè¯•)
        """
        self.contexts.append({
            "content": content,
            "priority": priority,
            "source": source,
            "tokens": self._estimate_tokens(content)
        })

    def _estimate_tokens(self, text: str) -> int:
        """ä¼°ç®—æ–‡æœ¬çš„tokenæ•°é‡"""
        # ç®€åŒ–ä¼°ç®—:ä¸­æ–‡0.5 token/å­—,è‹±æ–‡0.75 token/è¯
        chinese_chars = len([c for c in text if '\u4e00' <= c <= '\u9fff'])
        english_words = len(text.split())
        return int(chinese_chars * 0.5 + english_words * 0.75)

    def build_final_context(self, max_tokens: int = 180000) -> str:
        """æ„å»ºæœ€ç»ˆä¸Šä¸‹æ–‡(æŒ‰ä¼˜å…ˆçº§æ’åºå¹¶æˆªæ–­)

        Args:
            max_tokens: æœ€å¤§tokenæ•°(é¢„ç•™20Kç»™è¾“å‡º)

        Returns:
            åˆå¹¶åçš„ä¸Šä¸‹æ–‡å­—ç¬¦ä¸²
        """
        # æŒ‰ä¼˜å…ˆçº§é™åºæ’åº
        sorted_contexts = sorted(
            self.contexts,
            key=lambda x: x["priority"],
            reverse=True
        )

        final_contexts = []
        total_tokens = 0

        for ctx in sorted_contexts:
            if total_tokens + ctx["tokens"] <= max_tokens:
                final_contexts.append(ctx["content"])
                total_tokens += ctx["tokens"]
                print(f"âœ… [{ctx['source']}] {ctx['tokens']} tokens (ç´¯è®¡: {total_tokens})")
            else:
                print(f"âš ï¸ [{ctx['source']}] {ctx['tokens']} tokens - è¶…å‡ºé™åˆ¶,å·²è·³è¿‡")

        return "\n\n---\n\n".join(final_contexts)

# ä½¿ç”¨ç¤ºä¾‹
manager = ContextManager()

# 1. æ·»åŠ ç³»ç»Ÿçº§ä¸Šä¸‹æ–‡(æœ€é«˜ä¼˜å…ˆçº§)
with open("CLAUDE.md", "r", encoding="utf-8") as f:
    claude_md = f.read()
manager.add_context(claude_md, ContextManager.PRIORITY_SYSTEM, "CLAUDE.md")

# 2. æ·»åŠ Skill prompts(ç¬¬äºŒä¼˜å…ˆçº§)
skill_prompts = [
    ("laojin-style.md", "è€é‡‘é£æ ¼è§„èŒƒ"),
    ("baokuan-rules.md", "çˆ†æ¬¾è§„å¾‹"),
    ("auto-image-generator.md", "é…å›¾è§„åˆ™")
]
for filename, desc in skill_prompts:
    with open(f".claude/skills/gongzhonghao-writer/prompts/{filename}", "r") as f:
        content = f.read()
    manager.add_context(content, ContextManager.PRIORITY_SKILL, desc)

# 3. æ·»åŠ ç”¨æˆ·å†å²å¯¹è¯(ç¬¬ä¸‰ä¼˜å…ˆçº§)
user_history = load_conversation_history()
manager.add_context(user_history, ContextManager.PRIORITY_USER_HISTORY, "å†å²å¯¹è¯")

# 4. æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯(ç¬¬å››ä¼˜å…ˆçº§,ä½†ä¼šæ”¾åœ¨æœ€å)
current_message = "å¸®æˆ‘å†™ä¸€ç¯‡å…³äºClaude Codeçš„æ•™ç¨‹"
manager.add_context(current_message, ContextManager.PRIORITY_CURRENT, "å½“å‰æ¶ˆæ¯")

# æ„å»ºæœ€ç»ˆä¸Šä¸‹æ–‡
final_context = manager.build_final_context(max_tokens=180000)
print(f"\nğŸ“Š æœ€ç»ˆä¸Šä¸‹æ–‡é•¿åº¦: {len(final_context)} å­—ç¬¦")
```

#### ä¸Šä¸‹æ–‡å‹ç¼©ç®—æ³•å®æˆ˜
```python
import re
from typing import List, Tuple

class ContextCompressor:
    """ä¸Šä¸‹æ–‡å‹ç¼©å™¨ - æ™ºèƒ½åˆ é™¤å†—ä½™ä¿¡æ¯,ä¿ç•™æ ¸å¿ƒå†…å®¹"""

    def __init__(self):
        # å†—ä½™æ¨¡å¼åˆ—è¡¨(è¿™äº›å†…å®¹å¯ä»¥å®‰å…¨åˆ é™¤)
        self.redundant_patterns = [
            r"ğŸ“¸ æˆªå›¾ä½ç½®:.*?\n",  # æˆªå›¾æ ‡è®°
            r"\n{3,}",                # å¤šä½™ç©ºè¡Œ
            r"<!--.*?-->",            # HTMLæ³¨é‡Š
            r"\*\*æ³¨æ„\*\*:.*?\n",   # é‡å¤çš„æ³¨æ„äº‹é¡¹
        ]

    def compress(self, text: str, target_ratio: float = 0.7) -> Tuple[str, dict]:
        """å‹ç¼©æ–‡æœ¬åˆ°ç›®æ ‡æ¯”ä¾‹

        Args:
            text: åŸå§‹æ–‡æœ¬
            target_ratio: ç›®æ ‡å‹ç¼©æ¯”ä¾‹(0.7è¡¨ç¤ºå‹ç¼©åˆ°åŸæ¥çš„70%)

        Returns:
            (å‹ç¼©åæ–‡æœ¬, ç»Ÿè®¡ä¿¡æ¯å­—å…¸)
        """
        original_len = len(text)
        compressed = text
        stats = {"original_len": original_len}

        # Step 1: åˆ é™¤å†—ä½™æ¨¡å¼
        for pattern in self.redundant_patterns:
            compressed = re.sub(pattern, "\n", compressed)
        stats["after_redundancy_removal"] = len(compressed)

        # Step 2: æå–å…³é”®ä¿¡æ¯(ä¿ç•™æ ‡é¢˜ã€ä»£ç å—ã€åˆ—è¡¨)
        key_sections = self._extract_key_sections(compressed)
        stats["key_sections_count"] = len(key_sections)

        # Step 3: æ‘˜è¦åŒ–é•¿æ®µè½
        compressed = self._summarize_long_paragraphs(compressed)
        stats["after_summarization"] = len(compressed)

        # Step 4: æ£€æŸ¥å‹ç¼©æ¯”ä¾‹
        compression_ratio = len(compressed) / original_len
        stats["final_ratio"] = compression_ratio

        return compressed, stats

    def _extract_key_sections(self, text: str) -> List[str]:
        """æå–å…³é”®ç« èŠ‚(æ ‡é¢˜ã€ä»£ç å—ã€åˆ—è¡¨)"""
        key_patterns = [
            r"^#{1,6} .*$",           # Markdownæ ‡é¢˜
            r"```[\s\S]*?```",        # ä»£ç å—
            r"^- .*$",                # æ— åºåˆ—è¡¨
            r"^\d+\. .*$",            # æœ‰åºåˆ—è¡¨
            r"^\| .* \|$",            # è¡¨æ ¼è¡Œ
        ]

        key_sections = []
        for pattern in key_patterns:
            matches = re.findall(pattern, text, re.MULTILINE)
            key_sections.extend(matches)

        return key_sections

    def _summarize_long_paragraphs(self, text: str, max_len: int = 500) -> str:
        """æ‘˜è¦åŒ–è¶…é•¿æ®µè½"""
        paragraphs = text.split("\n\n")
        result = []

        for para in paragraphs:
            if len(para) > max_len and not para.startswith("```"):
                # ä¿ç•™å‰200å­— + "...(å†…å®¹çœç•¥)..." + å100å­—
                summary = para[:200] + "\n\n...(å†…å®¹çœç•¥)...\n\n" + para[-100:]
                result.append(summary)
            else:
                result.append(para)

        return "\n\n".join(result)

# ä½¿ç”¨ç¤ºä¾‹
compressor = ContextCompressor()

# å‹ç¼©é•¿æç¤ºè¯æ–‡ä»¶
with open("prompts/long-prompt.md", "r", encoding="utf-8") as f:
    original_prompt = f.read()

compressed_prompt, stats = compressor.compress(original_prompt, target_ratio=0.6)

print(f"åŸå§‹é•¿åº¦: {stats['original_len']} å­—ç¬¦")
print(f"åˆ é™¤å†—ä½™å: {stats['after_redundancy_removal']} å­—ç¬¦")
print(f"æ‘˜è¦åŒ–å: {stats['after_summarization']} å­—ç¬¦")
print(f"æœ€ç»ˆå‹ç¼©æ¯”: {stats['final_ratio']:.1%}")
```

#### åŠ¨æ€ä¸Šä¸‹æ–‡åŠ è½½æµç¨‹å›¾
```mermaid
graph TD
    A[ç”¨æˆ·å‘é€æ¶ˆæ¯] --> B{æ£€æµ‹Skillså…³é”®è¯}
    B -->|åŒ¹é…æˆåŠŸ| C[åŠ è½½skill.yaml]
    B -->|æœªåŒ¹é…| Z[ä½¿ç”¨é»˜è®¤ä¸Šä¸‹æ–‡]

    C --> D[è®¡ç®—å½“å‰å¯ç”¨tokens]
    D --> E{promptsæ€»å¤§å°}

    E -->|<50K tokens| F[å…¨éƒ¨åŠ è½½]
    E -->|50-100K| G[ä¼˜å…ˆçº§åŠ è½½]
    E -->|>100K| H[åˆ†å—åŠ è½½]

    F --> I[æ„å»ºå®Œæ•´ä¸Šä¸‹æ–‡]
    G --> J[åŠ è½½é«˜ä¼˜å…ˆçº§prompts]
    H --> K[åªåŠ è½½æ ¸å¿ƒprompts]

    J --> I
    K --> I

    I --> L[æ³¨å…¥åˆ°Claudeå¯¹è¯]
    L --> M[Claudeç”Ÿæˆå“åº”]

    M --> N{éœ€è¦æ‰§è¡Œè„šæœ¬?}
    N -->|æ˜¯| O[è¿è¡Œscripts/]
    N -->|å¦| P[ç›´æ¥è¿”å›ç»“æœ]

    O --> P
    P --> Q[ç”¨æˆ·æ”¶åˆ°å“åº”]
```

ğŸ“¸ æˆªå›¾ä½ç½®:[æ˜¾ç¤ºSkillsåŠ¨æ€åŠ è½½æ—¶çš„æ—¥å¿—è¾“å‡º,å«æ¯ä¸ªpromptçš„tokenç»Ÿè®¡]

#### ä¸Šä¸‹æ–‡æ³„æ¼æ£€æµ‹è„šæœ¬
```python
import re
from typing import List, Dict

class ContextLeakageDetector:
    """ä¸Šä¸‹æ–‡æ³„æ¼æ£€æµ‹å™¨ - é˜²æ­¢æ•æ„Ÿä¿¡æ¯é”™è¯¯æ³¨å…¥"""

    def __init__(self):
        # æ•æ„Ÿæ¨¡å¼åº“
        self.sensitive_patterns = {
            "APIå¯†é’¥": r"(api[_-]?key|apikey)[\"']?\s*[:=]\s*[\"']?[\w-]{20,}",
            "å¯†ç ": r"(password|passwd|pwd)[\"']?\s*[:=]\s*[\"']?[\w]{8,}",
            "Token": r"(token|bearer)[\"']?\s*[:=]\s*[\"']?[\w.-]{30,}",
            "é‚®ç®±": r"\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b",
            "èº«ä»½è¯": r"\d{17}[\dXx]",
            "æ‰‹æœºå·": r"1[3-9]\d{9}",
        }

    def scan(self, context: str) -> Dict[str, List[str]]:
        """æ‰«æä¸Šä¸‹æ–‡ä¸­çš„æ•æ„Ÿä¿¡æ¯

        Returns:
            {æ•æ„Ÿç±»å‹: [åŒ¹é…é¡¹åˆ—è¡¨]}
        """
        findings = {}

        for category, pattern in self.sensitive_patterns.items():
            matches = re.findall(pattern, context, re.IGNORECASE)
            if matches:
                findings[category] = [m if isinstance(m, str) else m[0] for m in matches]

        return findings

    def sanitize(self, context: str) -> str:
        """æ¸…æ´—ä¸Šä¸‹æ–‡ä¸­çš„æ•æ„Ÿä¿¡æ¯"""
        sanitized = context

        for category, pattern in self.sensitive_patterns.items():
            # æ›¿æ¢ä¸ºå ä½ç¬¦
            if category == "APIå¯†é’¥":
                sanitized = re.sub(pattern, r"\1='***REDACTED***'", sanitized, flags=re.IGNORECASE)
            elif category == "å¯†ç ":
                sanitized = re.sub(pattern, r"\1='***REDACTED***'", sanitized, flags=re.IGNORECASE)
            elif category == "Token":
                sanitized = re.sub(pattern, r"\1='***REDACTED***'", sanitized, flags=re.IGNORECASE)
            elif category == "é‚®ç®±":
                sanitized = re.sub(pattern, "***@***.***", sanitized)
            elif category == "èº«ä»½è¯":
                sanitized = re.sub(pattern, "***************", sanitized)
            elif category == "æ‰‹æœºå·":
                sanitized = re.sub(pattern, "***********", sanitized)

        return sanitized

# ä½¿ç”¨ç¤ºä¾‹
detector = ContextLeakageDetector()

# æ‰«æä¸Šä¸‹æ–‡
context_with_leak = """
# é…ç½®æ–‡ä»¶ç¤ºä¾‹
API_KEY = "sk-1234567890abcdefghij"
PASSWORD = "MySecret123"
EMAIL = "user@example.com"
"""

findings = detector.scan(context_with_leak)
if findings:
    print("ğŸš¨ æ£€æµ‹åˆ°æ•æ„Ÿä¿¡æ¯æ³„æ¼:")
    for category, items in findings.items():
        print(f"  - {category}: {len(items)}å¤„")

# æ¸…æ´—ä¸Šä¸‹æ–‡
sanitized_context = detector.sanitize(context_with_leak)
print("\nâœ… æ¸…æ´—åçš„ä¸Šä¸‹æ–‡:")
print(sanitized_context)
```

ğŸ“¸ æˆªå›¾ä½ç½®:[æ˜¾ç¤ºæ•æ„Ÿä¿¡æ¯æ£€æµ‹å·¥å…·çš„æ‰«ææŠ¥å‘Šç•Œé¢]

### 3.4 ç‰ˆæœ¬æ§åˆ¶ä¸æ¼”è¿›
æç¤ºè¯éœ€è¦åƒä»£ç ä¸€æ ·è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€‚

**ç‰ˆæœ¬å·è§„èŒƒ**:
```
Vä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬

- ä¸»ç‰ˆæœ¬: é‡å¤§æ¶æ„å˜æ›´,ä¸å…¼å®¹
- æ¬¡ç‰ˆæœ¬: æ–°å¢åŠŸèƒ½,å‘åå…¼å®¹
- ä¿®è®¢ç‰ˆæœ¬: Bugä¿®å¤,å°æ”¹è¿›
```

**ç‰ˆæœ¬å†å²è®°å½•**:
```markdown

## ç‰ˆæœ¬æ›´æ–°è¯´æ˜
**V6.1.2å‡çº§å†…å®¹**(2025-12-06):
1ã€**å®Œå…¨ç¦ç”¨è¡¨æ ¼**: Markdownè¡¨æ ¼åœ¨é£ä¹¦ã€å…¬ä¼—å·ç­‰å¹³å°æ¸²æŸ“ä¸å¥½,ç¦æ­¢ä½¿ç”¨
2ã€**è¡¨æ ¼æ›¿ä»£æ–¹æ¡ˆ**: ç”¨åˆ—è¡¨æˆ–åŠ ç²—æ ‡é¢˜+æ¢è¡Œå±•ç¤º

**V6.1.1å‡çº§å†…å®¹**(2025-12-06):
1ã€**æç®€å¼€å¤´æ ¼å¼**: æ ‡é¢˜åæ— åˆ†éš”çº¿,ç›´æ¥å°±æ˜¯å¤‡é€‰æ ‡é¢˜
2ã€**ç¦æ­¢çŸ¥è¯†åº“æç¤º**: æ¨¡æ¿é‡Œæœ‰,æ–‡ç« å†…ä¸éœ€è¦

**å‘åå…¼å®¹**:
- âœ… ä¿ç•™V6.0æ‰€æœ‰æ ¸å¿ƒå†™ä½œç†å¿µ
- âœ… ä¿ç•™è€é‡‘äººè®¾å’Œè¯­è¨€é£æ ¼
- âœ… ä¿ç•™åŒæ¨¡å¼å·¥ä½œæµ
- âœ… ä¿ç•™9ç»´åº¦è´¨é‡æ ‡å‡†
```

**æ•°æ®ç‰ˆæœ¬è¿½è¸ª**(æ•°æ®é©±åŠ¨Skillç‰¹æœ‰):
```yaml
# skill.yaml
data_version: "rule_validation_report.json V7.2 (2025-12-10)"

data_dependencies:
  source: "data/rule_validation_report.json"
  version: "V7.2"
  generated_at: "2025-12-10"
  dependent_files:
    p0_critical:
      - path: "prompts/baokuan-rules.md"
      - path: "scripts/title_scorer.py"
```


## ç¬¬å››ç«  çœŸå®æ¡ˆä¾‹åˆ†æ: å…¬ä¼—å·å†™ä½œåŠ©æ‰‹
### 4.1 é¡¹ç›®èƒŒæ™¯ä¸ç›®æ ‡
**é¡¹ç›®èƒŒæ™¯**:
"å…¬ä¼—å·å†™ä½œåŠ©æ‰‹"æ˜¯ä¸€ä¸ªåŸºäºClaude Code Skillsç³»ç»Ÿæ„å»ºçš„AIè¾…åŠ©å†™ä½œå·¥å…·,ç”¨äºå¸®åŠ©å†…å®¹åˆ›ä½œè€…(ä»¥"è€é‡‘"ä¸ºäººè®¾)é«˜æ•ˆäº§å‡ºé«˜è´¨é‡çš„å…¬ä¼—å·æ–‡ç« ã€‚

**æ ¸å¿ƒç›®æ ‡**:
1ã€**æå‡å†™ä½œæ•ˆç‡**: ä»æ„æ€åˆ°å‘å¸ƒçš„å…¨æµç¨‹è‡ªåŠ¨åŒ–
2ã€**ä¿è¯å†…å®¹è´¨é‡**: åŸºäºæ•°æ®é©±åŠ¨çš„è´¨é‡æ£€æµ‹
3ã€**é£æ ¼ä¸€è‡´æ€§**: ä¿æŒç»Ÿä¸€çš„"è€é‡‘"å†™ä½œé£æ ¼
4ã€**çŸ¥è¯†ç§¯ç´¯**: å°†çˆ†æ¬¾è§„å¾‹æ²‰æ·€ä¸ºå¯å¤ç”¨çš„è§„åˆ™

#### é¡¹ç›®å¯åŠ¨å‰çš„ç—›ç‚¹è°ƒç ”
**è°ƒç ”æ—¶é—´**: 2025å¹´9æœˆ
**è°ƒç ”æ–¹å¼**: ç”¨æˆ·è®¿è°ˆ + æ•°æ®åˆ†æ
**æ ·æœ¬æ•°é‡**: 15ä½å…¬ä¼—å·åˆ›ä½œè€…

**5ä¸ªæ ¸å¿ƒç—›ç‚¹**:


**ç—›ç‚¹**ï¼š**1. æ ‡é¢˜éš¾æƒ³**
**æè¿°**ï¼šæƒ³ä¸å‡ºå¸å¼•äººçš„æ ‡é¢˜
**ä¸¥é‡ç¨‹åº¦**ï¼šâ­â­â­â­â­
**å‡ºç°é¢‘ç‡**ï¼š100%
**å…¸å‹åœºæ™¯**ï¼š"èŠ±2å°æ—¶æƒ³æ ‡é¢˜,å†™æ–‡ç« åªç”¨1å°æ—¶"


**ç—›ç‚¹**ï¼š**2. é£æ ¼ä¸ä¸€è‡´**
**æè¿°**ï¼šæ¯ç¯‡æ–‡ç« é£æ ¼å·®å¼‚å¤§
**ä¸¥é‡ç¨‹åº¦**ï¼šâ­â­â­â­
**å‡ºç°é¢‘ç‡**ï¼š87%
**å…¸å‹åœºæ™¯**ï¼š"è¯»è€…è¯´:ä»Šå¤©çš„æ–‡ç« ä¸åƒæˆ‘å†™çš„"


**ç—›ç‚¹**ï¼š**3. AIè…”ä¸¥é‡**
**æè¿°**ï¼šAIç”Ÿæˆå†…å®¹æœºæ¢°æ„Ÿå¼º
**ä¸¥é‡ç¨‹åº¦**ï¼šâ­â­â­â­â­
**å‡ºç°é¢‘ç‡**ï¼š93%
**å…¸å‹åœºæ™¯**ï¼š"ä¸€çœ‹å°±æ˜¯AIå†™çš„,æ²¡äººå‘³å„¿"


**ç—›ç‚¹**ï¼š**4. é€‰é¢˜æ— ä¾æ®**
**æè¿°**ï¼šä¸çŸ¥é“å“ªäº›é€‰é¢˜ä¼šç«
**ä¸¥é‡ç¨‹åº¦**ï¼šâ­â­â­â­
**å‡ºç°é¢‘ç‡**ï¼š80%
**å…¸å‹åœºæ™¯**ï¼š"å†™äº†10ç¯‡,åªæœ‰1ç¯‡é˜…è¯»é‡è¿‡åƒ"


**ç—›ç‚¹**ï¼š**5. è´¨é‡æ— ä¿éšœ**
**æè¿°**ï¼šå‘å¸ƒå‰æ— ç³»ç»Ÿæ£€æŸ¥
**ä¸¥é‡ç¨‹åº¦**ï¼šâ­â­â­
**å‡ºç°é¢‘ç‡**ï¼š73%
**å…¸å‹åœºæ™¯**ï¼š"å‘å¸ƒåæ‰å‘ç°é”™åˆ«å­—æˆ–é€»è¾‘é—®é¢˜"


**ç”¨æˆ·è®¿è°ˆæ‘˜è¦**:

> "æˆ‘æœ€å¤§çš„ç—›ç‚¹æ˜¯æ ‡é¢˜,æ¯æ¬¡éƒ½è¦æƒ³åŠå¤©,æƒ³å‡ºæ¥çš„æ ‡é¢˜ç‚¹å‡»ç‡è¿˜ä¸é«˜ã€‚çœ‹åˆ«äººçš„çˆ†æ¬¾æ ‡é¢˜,æ„Ÿè§‰æœ‰è§„å¾‹,ä½†æˆ‘è‡ªå·±æ€»ç»“ä¸å‡ºæ¥ã€‚" â€” åˆ›ä½œè€…A

> "æˆ‘ç”¨AIå†™æ–‡ç« ,æ•ˆç‡ç¡®å®æé«˜äº†,ä½†è¯»è€…è¯´'ä»Šå¤©çš„æ–‡ç« ä¸åƒä½ çš„é£æ ¼',è¿™è®©æˆ‘å¾ˆè‹¦æ¼ã€‚æˆ‘éœ€è¦ä¸€ä¸ªèƒ½è®°ä½æˆ‘é£æ ¼çš„AIåŠ©æ‰‹ã€‚" â€” åˆ›ä½œè€…B

> "AIç”Ÿæˆçš„å†…å®¹å¤ªå®˜æ–¹äº†,'èµ‹èƒ½'ã€'é™æœ¬å¢æ•ˆ'è¿™ç§è¯ä¸€å¤§å †,å®Œå…¨ä¸æ˜¯æˆ‘çš„è¯´è¯æ–¹å¼ã€‚æˆ‘éœ€è¦èŠ±å¤§é‡æ—¶é—´æ”¹å†™ã€‚" â€” åˆ›ä½œè€…C

#### ç«å“åˆ†æè¡¨

**ç»´åº¦**ï¼š**é£æ ¼å®šåˆ¶**
**Notion AI**ï¼šâ­â­
**Jasper AI**ï¼šâ­â­â­
**Copy.ai**ï¼šâ­â­
**å…¬ä¼—å·å†™ä½œåŠ©æ‰‹**ï¼šâ­â­â­â­â­


**ç»´åº¦**ï¼š**æ•°æ®é©±åŠ¨**
**Notion AI**ï¼šâŒ
**Jasper AI**ï¼šâŒ
**Copy.ai**ï¼šâŒ
**å…¬ä¼—å·å†™ä½œåŠ©æ‰‹**ï¼šâœ… (82ç¯‡éªŒè¯)


**ç»´åº¦**ï¼š**è´¨é‡æ£€æµ‹**
**Notion AI**ï¼šâŒ
**Jasper AI**ï¼šâ­â­
**Copy.ai**ï¼šâŒ
**å…¬ä¼—å·å†™ä½œåŠ©æ‰‹**ï¼šâœ… (9ç»´åº¦)


**ç»´åº¦**ï¼š**çˆ†æ¬¾å…¬å¼**
**Notion AI**ï¼šâŒ
**Jasper AI**ï¼šâ­â­â­
**Copy.ai**ï¼šâ­â­
**å…¬ä¼—å·å†™ä½œåŠ©æ‰‹**ï¼šâœ… (5å¤§å…¬å¼)


**ç»´åº¦**ï¼š**æœ¬åœ°è¿è¡Œ**
**Notion AI**ï¼šâŒ
**Jasper AI**ï¼šâŒ
**Copy.ai**ï¼šâŒ
**å…¬ä¼—å·å†™ä½œåŠ©æ‰‹**ï¼šâœ… (Claude Code)


**ç»´åº¦**ï¼š**ä¸­æ–‡ä¼˜åŒ–**
**Notion AI**ï¼šâ­â­
**Jasper AI**ï¼šâ­â­
**Copy.ai**ï¼šâ­â­
**å…¬ä¼—å·å†™ä½œåŠ©æ‰‹**ï¼šâ­â­â­â­â­


**ç»´åº¦**ï¼š**å¯å®šåˆ¶æ€§**
**Notion AI**ï¼šâ­â­â­
**Jasper AI**ï¼šâ­â­
**Copy.ai**ï¼šâ­â­
**å…¬ä¼—å·å†™ä½œåŠ©æ‰‹**ï¼šâ­â­â­â­â­


**ç»´åº¦**ï¼š**ä»·æ ¼**
**Notion AI**ï¼š$10/æœˆ
**Jasper AI**ï¼š$49/æœˆ
**Copy.ai**ï¼š$36/æœˆ
**å…¬ä¼—å·å†™ä½œåŠ©æ‰‹**ï¼šå…è´¹(éœ€Claude)


**ç«å“ç¼ºé™·æ€»ç»“**:
1ã€**æ— ä¸­æ–‡æ·±åº¦ä¼˜åŒ–**: å¤§å¤šåŸºäºè‹±æ–‡è®­ç»ƒ,ä¸­æ–‡è¡¨è¾¾ä¸è‡ªç„¶
2ã€**æ— æ•°æ®éªŒè¯**: è§„åˆ™å‡­ç»éªŒ,æ— çœŸå®æ•°æ®æ”¯æ’‘
3ã€**æ— é£æ ¼è®°å¿†**: æ— æ³•è®°ä½å’Œå¤ç°ç”¨æˆ·çš„ä¸ªäººé£æ ¼
4ã€**ä»·æ ¼æ˜‚è´µ**: æœˆè´¹é«˜,å¯¹ä¸ªäººåˆ›ä½œè€…ä¸å‹å¥½

#### éœ€æ±‚ä¼˜å…ˆçº§æ’åº(MoSCoWæ–¹æ³•)
**Must Have (å¿…é¡»æœ‰)**:
1ã€âœ… è€é‡‘é£æ ¼çš„å‡†ç¡®å¤ç°
2ã€âœ… åŸºäºçœŸå®æ•°æ®çš„çˆ†æ¬¾æ ‡é¢˜å…¬å¼
3ã€âœ… 9ç»´åº¦è´¨é‡æ£€æµ‹ç³»ç»Ÿ
4ã€âœ… å®Œæ•´çš„å†™ä½œå·¥ä½œæµ(/writeå‘½ä»¤)

**Should Have (åº”è¯¥æœ‰)**:
5ã€âœ… é€‰é¢˜è¿‡æ»¤å™¨(åˆ¤æ–­é€‰é¢˜å¯è¡Œæ€§)
6ã€âœ… æ ‡é¢˜è¯„åˆ†ç³»ç»Ÿ(7ç»´åº¦è¯„åˆ†)
7ã€âœ… å‘æ–‡å‰æ£€æŸ¥æ¸…å•

**Could Have (å¯ä»¥æœ‰)**:
8ã€âœ… è‡ªåŠ¨é…å›¾å»ºè®®
9ã€âœ… ä¿¡æ¯å›¾ç”Ÿæˆå™¨
10ã€âœ… çƒ­ç‚¹æ‰«æå™¨

**Won't Have (æš‚ä¸è€ƒè™‘)**:
11ã€âŒ è‡ªåŠ¨å‘å¸ƒåˆ°å…¬ä¼—å·åå°(APIé™åˆ¶)
12ã€âŒ è¯„è®ºåŒºç®¡ç†(è¶…å‡ºèŒƒå›´)
13ã€âŒ æ•°æ®åˆ†ædashboard(éœ€ç‹¬ç«‹ç³»ç»Ÿ)

ğŸ“¸ **æˆªå›¾ä½ç½®**: [æ˜¾ç¤ºç—›ç‚¹è°ƒç ”é—®å·ç»“æœçš„æ•°æ®å¯è§†åŒ–,åŒ…å«æŸ±çŠ¶å›¾å’Œç”¨æˆ·å¼•ç”¨]

#### æŠ€æœ¯é€‰å‹å†³ç­–æ ‘
```
ä¸ºä½•é€‰æ‹©Claude Code Skills?
 |
 â”œâ”€ éœ€è¦æœ¬åœ°è¿è¡Œ? â”€â”€â”€YESâ”€â”€> æ’é™¤SaaSæœåŠ¡
 |                        |
 |                        â””â”€ éœ€è¦æ·±åº¦å®šåˆ¶? â”€â”€â”€YESâ”€â”€> Claude Code
 |
 â”œâ”€ éœ€è¦é£æ ¼è®°å¿†? â”€â”€â”€YESâ”€â”€> éœ€è¦æç¤ºè¯ç³»ç»Ÿ
 |                         |
 |                         â””â”€ éœ€è¦ä»£ç èƒ½åŠ›? â”€â”€â”€YESâ”€â”€> Claude Code + Scripts
 |
 â””â”€ éœ€è¦æ•°æ®é©±åŠ¨? â”€â”€â”€YESâ”€â”€> éœ€è¦æœ¬åœ°æ•°æ®å¤„ç†
                           |
                           â””â”€ éœ€è¦è¿­ä»£ä¼˜åŒ–? â”€â”€â”€YESâ”€â”€> âœ… Claude Code Skills

æœ€ç»ˆç»“è®º: Claude Code Skillsæ˜¯å”¯ä¸€æ»¡è¶³æ‰€æœ‰éœ€æ±‚çš„æ–¹æ¡ˆ
```

**æŠ€æœ¯é€‰å‹å¯¹æ¯”**:


**æ–¹æ¡ˆ**ï¼š**çº¯APIè°ƒç”¨**
**ä¼˜åŠ¿**ï¼šç®€å•
**åŠ£åŠ¿**ï¼šæ— é£æ ¼è®°å¿†,æ¯æ¬¡éƒ½è¦ä¼ å®Œæ•´ä¸Šä¸‹æ–‡
**å†³ç­–**ï¼šâŒ


**æ–¹æ¡ˆ**ï¼š**LangChain**
**ä¼˜åŠ¿**ï¼šç”Ÿæ€ä¸°å¯Œ
**åŠ£åŠ¿**ï¼šè¿‡äºå¤æ‚,å­¦ä¹ æˆæœ¬é«˜
**å†³ç­–**ï¼šâŒ


**æ–¹æ¡ˆ**ï¼š**Custom GPTs**
**ä¼˜åŠ¿**ï¼šæ˜“ä¸Šæ‰‹
**åŠ£åŠ¿**ï¼šæ— æ³•æœ¬åœ°è¿è¡Œ,æ•°æ®éšç§é—®é¢˜
**å†³ç­–**ï¼šâŒ


**æ–¹æ¡ˆ**ï¼š**Claude Code Skills**
**ä¼˜åŠ¿**ï¼šé£æ ¼è®°å¿†+è„šæœ¬èƒ½åŠ›+æœ¬åœ°è¿è¡Œ
**åŠ£åŠ¿**ï¼šéœ€è¦å­¦ä¹ Skillç³»ç»Ÿ
**å†³ç­–**ï¼šâœ…


### 4.2 skill.yamlé…ç½®åˆ†æ
```yaml
# å…¬ä¼—å·å†™ä½œåŠ©æ‰‹ skill.yaml å®Œæ•´åˆ†æ

name: "å…¬ä¼—å·å†™ä½œåŠ©æ‰‹ V7.2.0"
description: "åŸºäºæ•°æ®é©±åŠ¨çš„AIå…¬ä¼—å·å†™ä½œç³»ç»Ÿ"
version: "7.2.0"
data_version: "rule_validation_report.json V7.2 (2025-12-10)"
```

**é…ç½®äº®ç‚¹åˆ†æ**:

1ã€**ç‰ˆæœ¬åŒ–ç®¡ç†**
   - Skillç‰ˆæœ¬: 7.2.0
   - æ•°æ®ç‰ˆæœ¬: V7.2
   - ä¸¤è€…åŒæ­¥æ›´æ–°,ç¡®ä¿ä¸€è‡´æ€§

2ã€**è§¦å‘è¯è®¾è®¡**
```yaml
triggers:
  keywords:
    # æ ¸å¿ƒå‘½ä»¤
    - "/write"
    - "/write-auto"
    - "/hotspot"
    # é€šç”¨å…³é”®è¯
    - "å…¬ä¼—å·"
    - "å†™æ–‡ç« "
    - "è€é‡‘é£æ ¼"
    - "çˆ†æ¬¾"
```

è§¦å‘è¯åˆ†ä¸ºä¸¤ç±»:
- ç²¾ç¡®è§¦å‘: `/write`ç­‰å‘½ä»¤
- æ¨¡ç³Šè§¦å‘: "å…¬ä¼—å·"ç­‰é€šç”¨è¯

3ã€**å‘½ä»¤ä¸è„šæœ¬å…³è”**
```yaml
commands:
  - name: "title-gen"
    code: "21-title-gen"
    description: "ç”Ÿæˆ5ä¸ªçˆ†æ¬¾æ ‡é¢˜"
    script: "scripts/title_generator.py"
```

æ¯ä¸ªå‘½ä»¤å¯ä»¥å…³è”å¯¹åº”çš„æ‰§è¡Œè„šæœ¬,å½¢æˆå®Œæ•´çš„å·¥ä½œæµã€‚

4ã€**èƒ½åŠ›å£°æ˜**
```yaml
capabilities:
  - name: "7ç»´åº¦æ ‡é¢˜è¯„åˆ†"
    description: "å“ç‰Œè¯(35)+åŠ¨ä½œè¯(15)+æ•ˆç‡è¯(10)..."
    script: "scripts/title_scorer.py"
```

èƒ½åŠ›å£°æ˜å¸®åŠ©Claudeç†è§£è¿™ä¸ªSkillå¯ä»¥åšä»€ä¹ˆã€‚

5ã€**æ•°æ®ä¾èµ–é“¾**
```yaml
data_dependencies:
  source: "data/rule_validation_report.json"
  dependent_files:
    p0_critical:
      - path: "prompts/baokuan-rules.md"
      - path: "scripts/title_scorer.py"
```

æ˜ç¡®å£°æ˜æ•°æ®é©±åŠ¨çš„ä¾èµ–å…³ç³»,ä¾¿äºåŒæ­¥æ›´æ–°ã€‚

### 4.3 è§„èŒƒæ–‡æ¡£ä½“ç³»
å…¬ä¼—å·å†™ä½œåŠ©æ‰‹åŒ…å«12ä¸ªæ ¸å¿ƒè§„èŒƒæ–‡æ¡£:


**æ–‡æ¡£**ï¼šlaojin-style-v6-natural.md
**è¡Œæ•°**ï¼š680
**ç”¨é€”**ï¼šè€é‡‘å†™ä½œé£æ ¼å®šä¹‰


**æ–‡æ¡£**ï¼šbaokuan-rules.md
**è¡Œæ•°**ï¼š1150
**ç”¨é€”**ï¼šçˆ†æ¬¾è§„å¾‹æ‰‹å†Œ(æ ¸å¿ƒ)


**æ–‡æ¡£**ï¼šé€‰é¢˜ç­–ç•¥æŒ‡å—.md
**è¡Œæ•°**ï¼š302
**ç”¨é€”**ï¼šé€‰é¢˜åˆ†ç±»ä¸ç­–ç•¥


**æ–‡æ¡£**ï¼šformat-rules.md
**è¡Œæ•°**ï¼š-
**ç”¨é€”**ï¼šMarkdownæ ¼å¼è§„èŒƒ


**æ–‡æ¡£**ï¼šauto-image-generator.md
**è¡Œæ•°**ï¼š-
**ç”¨é€”**ï¼šè‡ªåŠ¨é…å›¾è§„åˆ™


**æ–‡æ¡£**ï¼šinfographic-generator.md
**è¡Œæ•°**ï¼š-
**ç”¨é€”**ï¼šä¿¡æ¯å›¾ç”Ÿæˆè§„åˆ™


**æ–‡æ¡£**ï¼šwriting-checklist.md
**è¡Œæ•°**ï¼š-
**ç”¨é€”**ï¼šå†™ä½œæ£€æŸ¥æ¸…å•


**æ–‡æ¡£**ï¼šhotspot-sources-china.md
**è¡Œæ•°**ï¼š-
**ç”¨é€”**ï¼šå›½å†…çƒ­ç‚¹æºé…ç½®


**æ–‡æ¡£**ï¼šhotspot-sources-international.md
**è¡Œæ•°**ï¼š-
**ç”¨é€”**ï¼šå›½é™…çƒ­ç‚¹æºé…ç½®


**æ–‡æ¡£**ï¼šhotspot-access-methods.md
**è¡Œæ•°**ï¼š-
**ç”¨é€”**ï¼šçƒ­ç‚¹è®¿é—®æ–¹æ³•


**æ–‡æ¡£**ï¼šhotspot-credibility-config.md
**è¡Œæ•°**ï¼š-
**ç”¨é€”**ï¼šå¯ä¿¡åº¦é…ç½®


**æ–‡æ¡£**ï¼šDATA_DRIVEN_WORKFLOW.md
**è¡Œæ•°**ï¼š-
**ç”¨é€”**ï¼šæ•°æ®é©±åŠ¨å·¥ä½œæµè§„èŒƒ


**æ–‡æ¡£å…³ç³»å›¾**:
```
                 skill.yaml
                     |
         +-----------+-----------+
         |                       |
         v                       v
   æ ¸å¿ƒé£æ ¼æ–‡æ¡£              åŠŸèƒ½è§„èŒƒæ–‡æ¡£
         |                       |
+--------+--------+     +--------+--------+
|                 |     |                 |
v                 v     v                 v
laojin-style   format  baokuan     é€‰é¢˜ç­–ç•¥
    |            rules   rules        æŒ‡å—
    |              |       |            |
    +------+-------+-------+------------+
           |
           v
    scripts/*.py (å®ç°)
```

### 4.4 è€é‡‘é£æ ¼å®ç°è¯¦è§£
"è€é‡‘é£æ ¼"æ˜¯è¿™ä¸ªSkillçš„æ ¸å¿ƒå·®å¼‚åŒ–ç‰¹æ€§ã€‚

**äººè®¾å®šä¹‰**:
```markdown
## ä¸€ã€è€é‡‘çš„æ ¸å¿ƒäººè®¾
**èº«ä»½èƒŒæ™¯**:
- **ä¸ä¼šå†™ä»£ç **,å…¨é AIåŠ©æ‰‹å¸®å¿™
- **è‹±è¯­æ²¡è¿‡å››çº§**,çœ‹è‹±æ–‡æ–‡æ¡£è¦é ç¿»è¯‘å·¥å…·
- **è‡ªå­¦æˆæ‰**,èµ°äº†å¾ˆå¤šå¼¯è·¯

**å†™ä½œæ ¸å¿ƒç†å¿µ**:
- ä»"è¡¨æ¼”è€é‡‘"è½¬å‘"å°±æ˜¯è€é‡‘"
- è‡ªç„¶è¡¨è¾¾,åƒå’Œæœ‹å‹èŠå¤©ä¸€æ ·
- **è®°ä½:è‡ªç„¶æ¯”å®Œç¾æ›´é‡è¦**
```

**è¯­è¨€è§„èŒƒ**:
```markdown
### è¯­è¨€ç¦å¿Œ(ç›´æ¥æ›¿æ¢):
- **èµ‹èƒ½** -> è®©ä½ èƒ½ã€å¸®ä½ åšåˆ°
- **é™æœ¬å¢æ•ˆ** -> çœæ—¶é—´ã€çœé’±
- **é¢ è¦†å¼** -> æ”¹å˜äº†ã€ä¸ä¸€æ ·äº†

### ä¸¥æ ¼ç¦æ­¢çš„è¯æ±‡(é›¶å®¹å¿):
- **è‰¹** -> å®Œå…¨ç¦æ­¢
- **SBã€sbã€ç…ç¬”** -> å®Œå…¨ç¦æ­¢
```

**çœŸå®æ€§éªŒè¯ç³»ç»Ÿ**:
```markdown
### çœŸå®æ€§éªŒè¯è‡ªæ£€æ¸…å•
- [ ] **æ—¶é—´çº¿å…·ä½“åŒ–** - æ²¡æœ‰"æµ‹è¯•äº†ä¸¤å¤©"ç­‰æŠ½è±¡æ—¶é—´?
- [ ] **æ¡ˆä¾‹å…·ä½“åŒ–** - åˆ—å‡ºè‡³å°‘3ä¸ªå…·ä½“äº§å“åäº†å—?
- [ ] **è¸©å‘ç»å†** - è‡³å°‘åŒ…å«1-2ä¸ªçœŸå®çš„å‘äº†å—?
- [ ] **ä¿šè¯­å£è¯­åŒ–** - ä½¿ç”¨"ç©"ã€"æ‰”è¿›å»"ç­‰å£è¯­äº†å—?
- [ ] **é€—å·æ–­å¥** - æ”¹æˆé€—å·ä¸ºä¸»æ–­å¥äº†å—?
```

**ç¤ºä¾‹å¯¹æ¯”**:
```markdown
âŒ **ä¸çœŸå®çš„å†™æ³•(AIè…”)**:
æµ‹è¯•äº†ä¸¤å¤©,å‘ç°è¿™ä¸ªå·¥å…·å¾ˆå¼ºå¤§ã€‚å¯¹æ¯”äº†ä¸€ä¸‹å…¶ä»–å·¥å…·,
å®ƒçš„æ•ˆæœéå¸¸å¥½ã€‚ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿,å€¼å¾—æ¨èã€‚

âœ… **çœŸå®çš„å†™æ³•(äººå‘³å„¿)**:
å‘¨äº”å‡Œæ™¨é€šå®µç©åˆ°ç°åœ¨,è¯´å®è¯,æœ‰ç‚¹æ…Œã€‚
ä¸æ˜¯å› ä¸ºè¿™ç©æ„å„¿å¤æ‚,è€Œæ˜¯å¤ªtmç®€å•äº†ã€‚
æ˜¨æ™šæŠŠã€Šwhy-language-models-hallucinateã€‹è¿™ç¯‡è®ºæ–‡æ‰”è¿›å»,
é»åœŸé£æ ¼çš„PPT,åå‡ åˆ†é’Ÿå°±å‡ºæ¥äº†ã€‚
ä½†ä¹Ÿæœ‰å‘,ä¸­æ–‡å­—ä¼šç³Š,è¿™å—æ¯”è‹±æ–‡æ‹‰ä¸€äº›ã€‚
```

**è´¨é‡æ£€æµ‹9ç»´åº¦**:
```python
@dataclass
class QualityScore:
    ai_tone: float      # AIè…”æ£€æµ‹ < 20åˆ†
    naturalness: float  # è‡ªç„¶åº¦ > 80åˆ†
    sincerity: float    # çœŸè¯šåº¦ > 75åˆ†
    wordiness: float    # å•°å—¦åº¦ < 25åˆ†
    repetition: float   # é‡å¤åº¦ < 15%
    readability: float  # å¯è¯»æ€§ > 85åˆ†
    humanity: float     # äººå‘³å„¿æŒ‡æ•° > 70åˆ†
    emotion_authenticity: float  # æƒ…æ„ŸçœŸå®æ€§ > 75åˆ†
    profanity: float    # è„è¯æ£€æµ‹ = 0å¤„
```


## ç¬¬äº”ç«  ç»ƒä¹ ä¸å®è·µ
### 5.1 åŸºç¡€ç»ƒä¹ : åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªSkill
**ç›®æ ‡**: åˆ›å»ºä¸€ä¸ªç®€å•çš„"ä»£ç æ³¨é‡Šç”Ÿæˆå™¨"Skill

**æ­¥éª¤**:

1ã€åˆ›å»ºç›®å½•ç»“æ„
```bash
mkdir -p .claude/skills/code-commenter/prompts
mkdir -p .claude/skills/code-commenter/scripts
```

2ã€åˆ›å»ºskill.yaml
```yaml
name: "ä»£ç æ³¨é‡Šç”Ÿæˆå™¨"
description: "è‡ªåŠ¨ä¸ºä»£ç ç”Ÿæˆæ¸…æ™°çš„æ³¨é‡Š"
version: "1.0.0"

triggers:
  keywords:
    - "æ·»åŠ æ³¨é‡Š"
    - "æ³¨é‡Šä»£ç "
    - "/comment"

prompt_files:
  main: "prompts/comment-style.md"
```

3ã€åˆ›å»ºæç¤ºè¯æ–‡ä»¶ prompts/comment-style.md
```markdown
# ä»£ç æ³¨é‡Šé£æ ¼æŒ‡å—

## æ³¨é‡ŠåŸåˆ™
1ã€è§£é‡Š"ä¸ºä»€ä¹ˆ",è€Œä¸æ˜¯"æ˜¯ä»€ä¹ˆ"
2ã€ä¿æŒç®€æ´,é¿å…åºŸè¯
3ã€ä½¿ç”¨ä¸­æ–‡æ³¨é‡Š

## æ³¨é‡Šæ ¼å¼
- å‡½æ•°æ³¨é‡Šä½¿ç”¨æ–‡æ¡£å­—ç¬¦ä¸²
- å¤æ‚é€»è¾‘æ·»åŠ è¡Œå†…æ³¨é‡Š
- TODOæ ‡æ³¨å¾…åŠäº‹é¡¹
```

### 5.2 è¿›é˜¶ç»ƒä¹ : æ·»åŠ è„šæœ¬èƒ½åŠ›
åœ¨ä¸Šä¸€ä¸ªç»ƒä¹ åŸºç¡€ä¸Š,æ·»åŠ è‡ªåŠ¨æ£€æµ‹æœªæ³¨é‡Šå‡½æ•°çš„è„šæœ¬ã€‚

### 5.3 æŒ‘æˆ˜ç»ƒä¹ : è®¾è®¡æ•°æ®é©±åŠ¨Skill
è®¾è®¡ä¸€ä¸ªå¯ä»¥ä»å†å²æ•°æ®ä¸­å­¦ä¹ å¹¶ä¼˜åŒ–è§„åˆ™çš„Skillã€‚


## æ€»ç»“
Skillsç³»ç»Ÿæ˜¯Claude Codeæœ€å¼ºå¤§çš„æ‰©å±•æœºåˆ¶ä¹‹ä¸€ã€‚é€šè¿‡æœ¬ç« çš„å­¦ä¹ ,ä½ åº”è¯¥æŒæ¡äº†:

1ã€**Skillsçš„æœ¬è´¨**: å°è£…é¢†åŸŸçŸ¥è¯†çš„å¯å¤ç”¨èƒ½åŠ›åŒ…
2ã€**ä¸Commandsçš„å…³ç³»**: äº’è¡¥åä½œ,å„å¸å…¶èŒ
3ã€**Progressive Disclosure**: ç®€å•ä½¿ç”¨,æ·±åº¦å¯å®šåˆ¶
4ã€**ç›®å½•ç»“æ„è§„èŒƒ**: skill.yaml + prompts + scripts
5ã€**æç¤ºè¯å·¥ç¨‹**: è§’è‰²ã€ä»»åŠ¡ã€è§„åˆ™ã€ç¤ºä¾‹ã€æ ¼å¼
6ã€**çœŸå®æ¡ˆä¾‹**: å…¬ä¼—å·å†™ä½œåŠ©æ‰‹çš„å®Œæ•´å®ç°

ä¸‹ä¸€æ­¥,å»ºè®®ä½ :
1ã€åŠ¨æ‰‹åˆ›å»ºä¸€ä¸ªç®€å•çš„Skill
2ã€é˜…è¯»å¹¶åˆ†æç°æœ‰Skillçš„å®ç°
3ã€ä¸ºä½ çš„å·¥ä½œåœºæ™¯è®¾è®¡ä¸“å±Skill
